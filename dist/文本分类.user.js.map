{"version":3,"sources":["../node_modules/synaptic/dist/synaptic.js","store.ts","文本分类.user.ts","C:/Users/llej/AppData/Roaming/npm/node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","modules","installedModules","__webpack_require__","moduleId","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","value","_createClass","defineProperties","target","props","length","descriptor","writable","key","Constructor","protoProps","staticProps","_LayerConnection","_LayerConnection2","_interopRequireDefault","_Neuron","_Neuron2","_Network","_Network2","obj","default","_classCallCheck","instance","TypeError","connectionType","ALL_TO_ALL","ONE_TO_ONE","ALL_TO_ELSE","gateType","INPUT","OUTPUT","Layer","size","list","connectedTo","neuron","push","activate","input","activations","Error","id","activation","propagate","rate","project","layer","type","weights","layers","connected","gate","connection","to","gater","connections","inputs","gated","ID","from","projected","gatedfrom","selfconnected","here","there","clear","reset","neurons","add","set","options","label","squash","bias","_typeof","Symbol","iterator","constructor","_Layer","_Layer2","_Trainer","_Trainer2","Network","hidden","output","optimized","optimize","unit","restore","inputLayer","outputLayer","that","propagation_sentences","reverse","hardcode","memory","variables","activation_sentences","j","join","trace_sentences","outputs","targets","split","Function","network","data","trace","check_activation","check_propagation","getValue","args","Array","slice","arguments","shift","prop","pop","state","old","elegibility","extended","weight","gain","hiddenLayer","setOptimize","bool","toJSON","ignoreTraces","ids","copy","LOGISTIC","TANH","IDENTITY","HLIM","RELU","selfconnection","toDot","edgeConnection","code","concat","layerTo","layerID","indexOf","layerToID","fakeNode","layerfrom","layerfromID","link","escape","replace","standalone","match","dimension","tmp","substring","index","worker","workerOptions","iterations","error","cost","crossValidate","costFunction","MSE","workerFunction","getWorkerSharedFunctions","toString","JSON","stringify","workerSourceCode","blob","Blob","blobURL","window","URL","createObjectURL","Worker","clone","fromJSON","_SHARED_WORKER_FUNCTIONS","train_f","train","_trainSet_f","_trainSet","test_f","test","json","config","_Connection","_Connection2","x","derivate","fx","Math","exp","pow","tanh","Neuron","uid","responsibility","influences","neighboors","random","derivative","influence","incoming","xtrace","isOutput","gradient","result","store_activation","store_trace","store_propagation","varID","__count","__neuron","allocate","store","allocated","currentLayer","getVar","buildSentence","sentence","isEmpty","noProjections","noGates","isInput","self_gain","self_weight","input_activation","input_weight","input_gain","eP","eN","neuron_old","initialized","incoming_weight","incoming_activation","neuron_self_weight","neuron_self_gain","gated_gain","connection_weight","neuron_responsibility","connection_gain","neuron_activation","quantity","shuffleInplace","floor","CROSS_ENTROPY","crossentropy","log","mse","BINARY","misses","round","Trainer","bucketSize","abort","currentRate","testSet","trainSet","start","Date","now","schedule","customLog","console","testSize","testError","isArray","numTrain","ceil","lastError","currentSetSize","currentBucket","every","do","shuffle","results","time","trainAsync","workerTrain","bind","Promise","resolve","reject","e","errorSum","callback","suppressWarning","warn","onmessage","action","message","ownership","memoryBuffer","terminate","scheduled","postMessage","XOR","defaults","DSR","distractors","prompts","criterion","success","trial","correct","symbols","noRepeat","range","avoid","number","used","equal","prediction","sequence","sequenceLength","any","indexes","positions","sort","distractorsCorrect","targetsCorrect","divideError","ERG","Node","paths","connect","node","reberGrammar","n1","n2","n3","n4","n5","n6","embededReberGrammar","reber1","reber2","generate","next","str","ch","charAt","different","array1","array2","max1","i1","max2","i2","iteration","table","read","predict","timingTask","getSamples","trainingSize","t","k","trainingSet","trainingSamples","trainSamples","testSamples","samples","Architect","undefined","_architect","_interopRequireWildcard","newObj","Connection","LayerConnection","fromLayer","toLayer","_Perceptron","_LSTM","_Liquid","_Hopfield","_Network3","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","Perceptron","_this","getPrototypeOf","previous","LSTM","last","option","peepholes","hiddenToHidden","outputToHidden","outputToGates","inputToOutput","hiddenLayers","inputGate","forgetGate","memoryCell","outputGate","cell","Liquid","gates","connectionList","Hopfield","trainer","learn","patterns","feed","pattern","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","event","parse","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","generated","js","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","parents","dep","deps","cached","cache","some","cb"],"mappings":"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","file":"文本分类.user.js","sourceRoot":"..\\文本分类","sourcesContent":["/*!\n * The MIT License (MIT)\n * \n * Copyright (c) 2017 Juan Cazala - https://caza.la\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE\n * \n * \n * \n * ********************************************************************************************\n *                                   SYNAPTIC (v1.1.4)\n * ********************************************************************************************\n * \n * Synaptic is a javascript neural network library for node.js and the browser, its generalized\n * algorithm is architecture-free, so you can build and train basically any type of first order\n * or even second order neural network architectures.\n * \n * http://en.wikipedia.org/wiki/Recurrent_neural_network#Second_Order_Recurrent_Neural_Network\n * \n * The library includes a few built-in architectures like multilayer perceptrons, multilayer\n * long-short term memory networks (LSTM) or liquid state machines, and a trainer capable of\n * training any given network, and includes built-in training tasks/tests like solving an XOR,\n * passing a Distracted Sequence Recall test or an Embeded Reber Grammar test.\n * \n * The algorithm implemented by this library has been taken from Derek D. Monner's paper:\n * \n * \n * A generalized LSTM-like training algorithm for second-order recurrent neural networks\n * http://www.overcomplete.net/papers/nn2012.pdf\n * \n * There are references to the equations in that paper commented through the source code.\n * \n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"synaptic\"] = factory();\n\telse\n\t\troot[\"synaptic\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _LayerConnection = __webpack_require__(6);\n\nvar _LayerConnection2 = _interopRequireDefault(_LayerConnection);\n\nvar _Neuron = __webpack_require__(2);\n\nvar _Neuron2 = _interopRequireDefault(_Neuron);\n\nvar _Network = __webpack_require__(1);\n\nvar _Network2 = _interopRequireDefault(_Network);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// types of connections\nvar connectionType = {\n  ALL_TO_ALL: \"ALL TO ALL\",\n  ONE_TO_ONE: \"ONE TO ONE\",\n  ALL_TO_ELSE: \"ALL TO ELSE\"\n};\n\n// types of gates\nvar gateType = {\n  INPUT: \"INPUT\",\n  OUTPUT: \"OUTPUT\",\n  ONE_TO_ONE: \"ONE TO ONE\"\n};\n\nvar Layer = function () {\n  function Layer(size) {\n    _classCallCheck(this, Layer);\n\n    this.size = size | 0;\n    this.list = [];\n\n    this.connectedTo = [];\n\n    while (size--) {\n      var neuron = new _Neuron2.default();\n      this.list.push(neuron);\n    }\n  }\n\n  // activates all the neurons in the layer\n\n\n  _createClass(Layer, [{\n    key: 'activate',\n    value: function activate(input) {\n\n      var activations = [];\n\n      if (typeof input != 'undefined') {\n        if (input.length != this.size) throw new Error('INPUT size and LAYER size must be the same to activate!');\n\n        for (var id in this.list) {\n          var neuron = this.list[id];\n          var activation = neuron.activate(input[id]);\n          activations.push(activation);\n        }\n      } else {\n        for (var id in this.list) {\n          var neuron = this.list[id];\n          var activation = neuron.activate();\n          activations.push(activation);\n        }\n      }\n      return activations;\n    }\n\n    // propagates the error on all the neurons of the layer\n\n  }, {\n    key: 'propagate',\n    value: function propagate(rate, target) {\n\n      if (typeof target != 'undefined') {\n        if (target.length != this.size) throw new Error('TARGET size and LAYER size must be the same to propagate!');\n\n        for (var id = this.list.length - 1; id >= 0; id--) {\n          var neuron = this.list[id];\n          neuron.propagate(rate, target[id]);\n        }\n      } else {\n        for (var id = this.list.length - 1; id >= 0; id--) {\n          var neuron = this.list[id];\n          neuron.propagate(rate);\n        }\n      }\n    }\n\n    // projects a connection from this layer to another one\n\n  }, {\n    key: 'project',\n    value: function project(layer, type, weights) {\n\n      if (layer instanceof _Network2.default) layer = layer.layers.input;\n\n      if (layer instanceof Layer) {\n        if (!this.connected(layer)) return new _LayerConnection2.default(this, layer, type, weights);\n      } else throw new Error('Invalid argument, you can only project connections to LAYERS and NETWORKS!');\n    }\n\n    // gates a connection betwenn two layers\n\n  }, {\n    key: 'gate',\n    value: function gate(connection, type) {\n\n      if (type == Layer.gateType.INPUT) {\n        if (connection.to.size != this.size) throw new Error('GATER layer and CONNECTION.TO layer must be the same size in order to gate!');\n\n        for (var id in connection.to.list) {\n          var neuron = connection.to.list[id];\n          var gater = this.list[id];\n          for (var input in neuron.connections.inputs) {\n            var gated = neuron.connections.inputs[input];\n            if (gated.ID in connection.connections) gater.gate(gated);\n          }\n        }\n      } else if (type == Layer.gateType.OUTPUT) {\n        if (connection.from.size != this.size) throw new Error('GATER layer and CONNECTION.FROM layer must be the same size in order to gate!');\n\n        for (var id in connection.from.list) {\n          var neuron = connection.from.list[id];\n          var gater = this.list[id];\n          for (var projected in neuron.connections.projected) {\n            var gated = neuron.connections.projected[projected];\n            if (gated.ID in connection.connections) gater.gate(gated);\n          }\n        }\n      } else if (type == Layer.gateType.ONE_TO_ONE) {\n        if (connection.size != this.size) throw new Error('The number of GATER UNITS must be the same as the number of CONNECTIONS to gate!');\n\n        for (var id in connection.list) {\n          var gater = this.list[id];\n          var gated = connection.list[id];\n          gater.gate(gated);\n        }\n      }\n      connection.gatedfrom.push({ layer: this, type: type });\n    }\n\n    // true or false whether the whole layer is self-connected or not\n\n  }, {\n    key: 'selfconnected',\n    value: function selfconnected() {\n\n      for (var id in this.list) {\n        var neuron = this.list[id];\n        if (!neuron.selfconnected()) return false;\n      }\n      return true;\n    }\n\n    // true of false whether the layer is connected to another layer (parameter) or not\n\n  }, {\n    key: 'connected',\n    value: function connected(layer) {\n      // Check if ALL to ALL connection\n      var connections = 0;\n      for (var here in this.list) {\n        for (var there in layer.list) {\n          var from = this.list[here];\n          var to = layer.list[there];\n          var connected = from.connected(to);\n          if (connected.type == 'projected') connections++;\n        }\n      }\n      if (connections == this.size * layer.size) return Layer.connectionType.ALL_TO_ALL;\n\n      // Check if ONE to ONE connection\n      connections = 0;\n      for (var neuron in this.list) {\n        var from = this.list[neuron];\n        var to = layer.list[neuron];\n        var connected = from.connected(to);\n        if (connected.type == 'projected') connections++;\n      }\n      if (connections == this.size) return Layer.connectionType.ONE_TO_ONE;\n    }\n\n    // clears all the neuorns in the layer\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      for (var id in this.list) {\n        var neuron = this.list[id];\n        neuron.clear();\n      }\n    }\n\n    // resets all the neurons in the layer\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      for (var id in this.list) {\n        var neuron = this.list[id];\n        neuron.reset();\n      }\n    }\n\n    // returns all the neurons in the layer (array)\n\n  }, {\n    key: 'neurons',\n    value: function neurons() {\n      return this.list;\n    }\n\n    // adds a neuron to the layer\n\n  }, {\n    key: 'add',\n    value: function add(neuron) {\n      neuron = neuron || new _Neuron2.default();\n      this.list.push(neuron);\n      this.size++;\n    }\n  }, {\n    key: 'set',\n    value: function set(options) {\n      options = options || {};\n\n      for (var i in this.list) {\n        var neuron = this.list[i];\n        if (options.label) neuron.label = options.label + '_' + neuron.ID;\n        if (options.squash) neuron.squash = options.squash;\n        if (options.bias) neuron.bias = options.bias;\n      }\n      return this;\n    }\n  }]);\n\n  return Layer;\n}();\n\nLayer.connectionType = connectionType;\nLayer.gateType = gateType;\nexports.default = Layer;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Neuron = __webpack_require__(2);\n\nvar _Neuron2 = _interopRequireDefault(_Neuron);\n\nvar _Layer = __webpack_require__(0);\n\nvar _Layer2 = _interopRequireDefault(_Layer);\n\nvar _Trainer = __webpack_require__(3);\n\nvar _Trainer2 = _interopRequireDefault(_Trainer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Network = function () {\n  function Network(layers) {\n    _classCallCheck(this, Network);\n\n    if (typeof layers != 'undefined') {\n      this.layers = {\n        input: layers.input || null,\n        hidden: layers.hidden || [],\n        output: layers.output || null\n      };\n      this.optimized = null;\n    }\n  }\n\n  // feed-forward activation of all the layers to produce an ouput\n\n\n  _createClass(Network, [{\n    key: 'activate',\n    value: function activate(input) {\n      if (this.optimized === false) {\n        this.layers.input.activate(input);\n        for (var i = 0; i < this.layers.hidden.length; i++) {\n          this.layers.hidden[i].activate();\n        }return this.layers.output.activate();\n      } else {\n        if (this.optimized == null) this.optimize();\n        return this.optimized.activate(input);\n      }\n    }\n\n    // back-propagate the error thru the network\n\n  }, {\n    key: 'propagate',\n    value: function propagate(rate, target) {\n      if (this.optimized === false) {\n        this.layers.output.propagate(rate, target);\n        for (var i = this.layers.hidden.length - 1; i >= 0; i--) {\n          this.layers.hidden[i].propagate(rate);\n        }\n      } else {\n        if (this.optimized == null) this.optimize();\n        this.optimized.propagate(rate, target);\n      }\n    }\n\n    // project a connection to another unit (either a network or a layer)\n\n  }, {\n    key: 'project',\n    value: function project(unit, type, weights) {\n      if (this.optimized) this.optimized.reset();\n\n      if (unit instanceof Network) return this.layers.output.project(unit.layers.input, type, weights);\n\n      if (unit instanceof _Layer2.default) return this.layers.output.project(unit, type, weights);\n\n      throw new Error('Invalid argument, you can only project connections to LAYERS and NETWORKS!');\n    }\n\n    // let this network gate a connection\n\n  }, {\n    key: 'gate',\n    value: function gate(connection, type) {\n      if (this.optimized) this.optimized.reset();\n      this.layers.output.gate(connection, type);\n    }\n\n    // clear all elegibility traces and extended elegibility traces (the network forgets its context, but not what was trained)\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.restore();\n\n      var inputLayer = this.layers.input,\n          outputLayer = this.layers.output;\n\n      inputLayer.clear();\n      for (var i = 0; i < this.layers.hidden.length; i++) {\n        this.layers.hidden[i].clear();\n      }\n      outputLayer.clear();\n\n      if (this.optimized) this.optimized.reset();\n    }\n\n    // reset all weights and clear all traces (ends up like a new network)\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.restore();\n\n      var inputLayer = this.layers.input,\n          outputLayer = this.layers.output;\n\n      inputLayer.reset();\n      for (var i = 0; i < this.layers.hidden.length; i++) {\n        this.layers.hidden[i].reset();\n      }\n      outputLayer.reset();\n\n      if (this.optimized) this.optimized.reset();\n    }\n\n    // hardcodes the behaviour of the whole network into a single optimized function\n\n  }, {\n    key: 'optimize',\n    value: function optimize() {\n      var that = this;\n      var optimized = {};\n      var neurons = this.neurons();\n\n      for (var i = 0; i < neurons.length; i++) {\n        var neuron = neurons[i].neuron;\n        var layer = neurons[i].layer;\n        while (neuron.neuron) {\n          neuron = neuron.neuron;\n        }optimized = neuron.optimize(optimized, layer);\n      }\n\n      for (var i = 0; i < optimized.propagation_sentences.length; i++) {\n        optimized.propagation_sentences[i].reverse();\n      }optimized.propagation_sentences.reverse();\n\n      var hardcode = '';\n      hardcode += 'var F = Float64Array ? new Float64Array(' + optimized.memory + ') : []; ';\n      for (var i in optimized.variables) {\n        hardcode += 'F[' + optimized.variables[i].id + '] = ' + (optimized.variables[i].value || 0) + '; ';\n      }hardcode += 'var activate = function(input){\\n';\n      for (var i = 0; i < optimized.inputs.length; i++) {\n        hardcode += 'F[' + optimized.inputs[i] + '] = input[' + i + ']; ';\n      }for (var i = 0; i < optimized.activation_sentences.length; i++) {\n        if (optimized.activation_sentences[i].length > 0) {\n          for (var j = 0; j < optimized.activation_sentences[i].length; j++) {\n            hardcode += optimized.activation_sentences[i][j].join(' ');\n            hardcode += optimized.trace_sentences[i][j].join(' ');\n          }\n        }\n      }\n      hardcode += ' var output = []; ';\n      for (var i = 0; i < optimized.outputs.length; i++) {\n        hardcode += 'output[' + i + '] = F[' + optimized.outputs[i] + ']; ';\n      }hardcode += 'return output; }; ';\n      hardcode += 'var propagate = function(rate, target){\\n';\n      hardcode += 'F[' + optimized.variables.rate.id + '] = rate; ';\n      for (var i = 0; i < optimized.targets.length; i++) {\n        hardcode += 'F[' + optimized.targets[i] + '] = target[' + i + ']; ';\n      }for (var i = 0; i < optimized.propagation_sentences.length; i++) {\n        for (var j = 0; j < optimized.propagation_sentences[i].length; j++) {\n          hardcode += optimized.propagation_sentences[i][j].join(' ') + ' ';\n        }\n      }hardcode += ' };\\n';\n      hardcode += 'var ownership = function(memoryBuffer){\\nF = memoryBuffer;\\nthis.memory = F;\\n};\\n';\n      hardcode += 'return {\\nmemory: F,\\nactivate: activate,\\npropagate: propagate,\\nownership: ownership\\n};';\n      hardcode = hardcode.split(';').join(';\\n');\n\n      var constructor = new Function(hardcode);\n\n      var network = constructor();\n      network.data = {\n        variables: optimized.variables,\n        activate: optimized.activation_sentences,\n        propagate: optimized.propagation_sentences,\n        trace: optimized.trace_sentences,\n        inputs: optimized.inputs,\n        outputs: optimized.outputs,\n        check_activation: this.activate,\n        check_propagation: this.propagate\n      };\n\n      network.reset = function () {\n        if (that.optimized) {\n          that.optimized = null;\n          that.activate = network.data.check_activation;\n          that.propagate = network.data.check_propagation;\n        }\n      };\n\n      this.optimized = network;\n      this.activate = network.activate;\n      this.propagate = network.propagate;\n    }\n\n    // restores all the values from the optimized network the their respective objects in order to manipulate the network\n\n  }, {\n    key: 'restore',\n    value: function restore() {\n      if (!this.optimized) return;\n\n      var optimized = this.optimized;\n\n      var getValue = function getValue() {\n        var args = Array.prototype.slice.call(arguments);\n\n        var unit = args.shift();\n        var prop = args.pop();\n\n        var id = prop + '_';\n        for (var property in args) {\n          id += args[property] + '_';\n        }id += unit.ID;\n\n        var memory = optimized.memory;\n        var variables = optimized.data.variables;\n\n        if (id in variables) return memory[variables[id].id];\n        return 0;\n      };\n\n      var list = this.neurons();\n\n      // link id's to positions in the array\n      for (var i = 0; i < list.length; i++) {\n        var neuron = list[i].neuron;\n        while (neuron.neuron) {\n          neuron = neuron.neuron;\n        }neuron.state = getValue(neuron, 'state');\n        neuron.old = getValue(neuron, 'old');\n        neuron.activation = getValue(neuron, 'activation');\n        neuron.bias = getValue(neuron, 'bias');\n\n        for (var input in neuron.trace.elegibility) {\n          neuron.trace.elegibility[input] = getValue(neuron, 'trace', 'elegibility', input);\n        }for (var gated in neuron.trace.extended) {\n          for (var input in neuron.trace.extended[gated]) {\n            neuron.trace.extended[gated][input] = getValue(neuron, 'trace', 'extended', gated, input);\n          }\n        } // get connections\n        for (var j in neuron.connections.projected) {\n          var connection = neuron.connections.projected[j];\n          connection.weight = getValue(connection, 'weight');\n          connection.gain = getValue(connection, 'gain');\n        }\n      }\n    }\n\n    // returns all the neurons in the network\n\n  }, {\n    key: 'neurons',\n    value: function neurons() {\n      var neurons = [];\n\n      var inputLayer = this.layers.input.neurons(),\n          outputLayer = this.layers.output.neurons();\n\n      for (var i = 0; i < inputLayer.length; i++) {\n        neurons.push({\n          neuron: inputLayer[i],\n          layer: 'input'\n        });\n      }\n\n      for (var i = 0; i < this.layers.hidden.length; i++) {\n        var hiddenLayer = this.layers.hidden[i].neurons();\n        for (var j = 0; j < hiddenLayer.length; j++) {\n          neurons.push({\n            neuron: hiddenLayer[j],\n            layer: i\n          });\n        }\n      }\n\n      for (var i = 0; i < outputLayer.length; i++) {\n        neurons.push({\n          neuron: outputLayer[i],\n          layer: 'output'\n        });\n      }\n\n      return neurons;\n    }\n\n    // returns number of inputs of the network\n\n  }, {\n    key: 'inputs',\n    value: function inputs() {\n      return this.layers.input.size;\n    }\n\n    // returns number of outputs of hte network\n\n  }, {\n    key: 'outputs',\n    value: function outputs() {\n      return this.layers.output.size;\n    }\n\n    // sets the layers of the network\n\n  }, {\n    key: 'set',\n    value: function set(layers) {\n      this.layers = {\n        input: layers.input || null,\n        hidden: layers.hidden || [],\n        output: layers.output || null\n      };\n      if (this.optimized) this.optimized.reset();\n    }\n  }, {\n    key: 'setOptimize',\n    value: function setOptimize(bool) {\n      this.restore();\n      if (this.optimized) this.optimized.reset();\n      this.optimized = bool ? null : false;\n    }\n\n    // returns a json that represents all the neurons and connections of the network\n\n  }, {\n    key: 'toJSON',\n    value: function toJSON(ignoreTraces) {\n      this.restore();\n\n      var list = this.neurons();\n      var neurons = [];\n      var connections = [];\n\n      // link id's to positions in the array\n      var ids = {};\n      for (var i = 0; i < list.length; i++) {\n        var neuron = list[i].neuron;\n        while (neuron.neuron) {\n          neuron = neuron.neuron;\n        }ids[neuron.ID] = i;\n\n        var copy = {\n          trace: {\n            elegibility: {},\n            extended: {}\n          },\n          state: neuron.state,\n          old: neuron.old,\n          activation: neuron.activation,\n          bias: neuron.bias,\n          layer: list[i].layer\n        };\n\n        copy.squash = neuron.squash == _Neuron2.default.squash.LOGISTIC ? 'LOGISTIC' : neuron.squash == _Neuron2.default.squash.TANH ? 'TANH' : neuron.squash == _Neuron2.default.squash.IDENTITY ? 'IDENTITY' : neuron.squash == _Neuron2.default.squash.HLIM ? 'HLIM' : neuron.squash == _Neuron2.default.squash.RELU ? 'RELU' : null;\n\n        neurons.push(copy);\n      }\n\n      for (var i = 0; i < list.length; i++) {\n        var neuron = list[i].neuron;\n        while (neuron.neuron) {\n          neuron = neuron.neuron;\n        }for (var j in neuron.connections.projected) {\n          var connection = neuron.connections.projected[j];\n          connections.push({\n            from: ids[connection.from.ID],\n            to: ids[connection.to.ID],\n            weight: connection.weight,\n            gater: connection.gater ? ids[connection.gater.ID] : null\n          });\n        }\n        if (neuron.selfconnected()) {\n          connections.push({\n            from: ids[neuron.ID],\n            to: ids[neuron.ID],\n            weight: neuron.selfconnection.weight,\n            gater: neuron.selfconnection.gater ? ids[neuron.selfconnection.gater.ID] : null\n          });\n        }\n      }\n\n      return {\n        neurons: neurons,\n        connections: connections\n      };\n    }\n\n    // export the topology into dot language which can be visualized as graphs using dot\n    /* example: ... console.log(net.toDotLang());\n                $ node example.js > example.dot\n                $ dot example.dot -Tpng > out.png\n    */\n\n  }, {\n    key: 'toDot',\n    value: function toDot(edgeConnection) {\n      if (!(typeof edgeConnection === 'undefined' ? 'undefined' : _typeof(edgeConnection))) edgeConnection = false;\n      var code = 'digraph nn {\\n    rankdir = BT\\n';\n      var layers = [this.layers.input].concat(this.layers.hidden, this.layers.output);\n      for (var i = 0; i < layers.length; i++) {\n        for (var j = 0; j < layers[i].connectedTo.length; j++) {\n          // projections\n          var connection = layers[i].connectedTo[j];\n          var layerTo = connection.to;\n          var size = connection.size;\n          var layerID = layers.indexOf(layers[i]);\n          var layerToID = layers.indexOf(layerTo);\n          /* http://stackoverflow.com/questions/26845540/connect-edges-with-graph-dot\n           * DOT does not support edge-to-edge connections\n           * This workaround produces somewhat weird graphs ...\n          */\n          if (edgeConnection) {\n            if (connection.gatedfrom.length) {\n              var fakeNode = 'fake' + layerID + '_' + layerToID;\n              code += '    ' + fakeNode + ' [label = \"\", shape = point, width = 0.01, height = 0.01]\\n';\n              code += '    ' + layerID + ' -> ' + fakeNode + ' [label = ' + size + ', arrowhead = none]\\n';\n              code += '    ' + fakeNode + ' -> ' + layerToID + '\\n';\n            } else code += '    ' + layerID + ' -> ' + layerToID + ' [label = ' + size + ']\\n';\n            for (var from in connection.gatedfrom) {\n              // gatings\n              var layerfrom = connection.gatedfrom[from].layer;\n              var layerfromID = layers.indexOf(layerfrom);\n              code += '    ' + layerfromID + ' -> ' + fakeNode + ' [color = blue]\\n';\n            }\n          } else {\n            code += '    ' + layerID + ' -> ' + layerToID + ' [label = ' + size + ']\\n';\n            for (var from in connection.gatedfrom) {\n              // gatings\n              var layerfrom = connection.gatedfrom[from].layer;\n              var layerfromID = layers.indexOf(layerfrom);\n              code += '    ' + layerfromID + ' -> ' + layerToID + ' [color = blue]\\n';\n            }\n          }\n        }\n      }\n      code += '}\\n';\n      return {\n        code: code,\n        link: 'https://chart.googleapis.com/chart?chl=' + escape(code.replace('/ /g', '+')) + '&cht=gv'\n      };\n    }\n\n    // returns a function that works as the activation of the network and can be used without depending on the library\n\n  }, {\n    key: 'standalone',\n    value: function standalone() {\n      if (!this.optimized) this.optimize();\n\n      var data = this.optimized.data;\n\n      // build activation function\n      var activation = 'function (input) {\\n';\n\n      // build inputs\n      for (var i = 0; i < data.inputs.length; i++) {\n        activation += 'F[' + data.inputs[i] + '] = input[' + i + '];\\n';\n      } // build network activation\n      for (var i = 0; i < data.activate.length; i++) {\n        // shouldn't this be layer?\n        for (var j = 0; j < data.activate[i].length; j++) {\n          activation += data.activate[i][j].join('') + '\\n';\n        }\n      }\n\n      // build outputs\n      activation += 'var output = [];\\n';\n      for (var i = 0; i < data.outputs.length; i++) {\n        activation += 'output[' + i + '] = F[' + data.outputs[i] + '];\\n';\n      }activation += 'return output;\\n}';\n\n      // reference all the positions in memory\n      var memory = activation.match(/F\\[(\\d+)\\]/g);\n      var dimension = 0;\n      var ids = {};\n\n      for (var i = 0; i < memory.length; i++) {\n        var tmp = memory[i].match(/\\d+/)[0];\n        if (!(tmp in ids)) {\n          ids[tmp] = dimension++;\n        }\n      }\n      var hardcode = 'F = {\\n';\n\n      for (var i in ids) {\n        hardcode += ids[i] + ': ' + this.optimized.memory[i] + ',\\n';\n      }hardcode = hardcode.substring(0, hardcode.length - 2) + '\\n};\\n';\n      hardcode = 'var run = ' + activation.replace(/F\\[(\\d+)]/g, function (index) {\n        return 'F[' + ids[index.match(/\\d+/)[0]] + ']';\n      }).replace('{\\n', '{\\n' + hardcode + '') + ';\\n';\n      hardcode += 'return run';\n\n      // return standalone function\n      return new Function(hardcode)();\n    }\n\n    // Return a HTML5 WebWorker specialized on training the network stored in `memory`.\n    // Train based on the given dataSet and options.\n    // The worker returns the updated `memory` when done.\n\n  }, {\n    key: 'worker',\n    value: function worker(memory, set, options) {\n      // Copy the options and set defaults (options might be different for each worker)\n      var workerOptions = {};\n      if (options) workerOptions = options;\n      workerOptions.rate = workerOptions.rate || .2;\n      workerOptions.iterations = workerOptions.iterations || 100000;\n      workerOptions.error = workerOptions.error || .005;\n      workerOptions.cost = workerOptions.cost || null;\n      workerOptions.crossValidate = workerOptions.crossValidate || null;\n\n      // Cost function might be different for each worker\n      var costFunction = '// REPLACED BY WORKER\\nvar cost = ' + (options && options.cost || this.cost || _Trainer2.default.cost.MSE) + ';\\n';\n      var workerFunction = Network.getWorkerSharedFunctions();\n      workerFunction = workerFunction.replace(/var cost = options && options\\.cost \\|\\| this\\.cost \\|\\| Trainer\\.cost\\.MSE;/g, costFunction);\n\n      // Set what we do when training is finished\n      workerFunction = workerFunction.replace('return results;', 'postMessage({action: \"done\", message: results, memoryBuffer: F}, [F.buffer]);');\n\n      // Replace log with postmessage\n      workerFunction = workerFunction.replace('console.log(\\'iterations\\', iterations, \\'error\\', error, \\'rate\\', currentRate)', 'postMessage({action: \\'log\\', message: {\\n' + 'iterations: iterations,\\n' + 'error: error,\\n' + 'rate: currentRate\\n' + '}\\n' + '})');\n\n      // Replace schedule with postmessage\n      workerFunction = workerFunction.replace('abort = this.schedule.do({ error: error, iterations: iterations, rate: currentRate })', 'postMessage({action: \\'schedule\\', message: {\\n' + 'iterations: iterations,\\n' + 'error: error,\\n' + 'rate: currentRate\\n' + '}\\n' + '})');\n\n      if (!this.optimized) this.optimize();\n\n      var hardcode = 'var inputs = ' + this.optimized.data.inputs.length + ';\\n';\n      hardcode += 'var outputs = ' + this.optimized.data.outputs.length + ';\\n';\n      hardcode += 'var F =  new Float64Array([' + this.optimized.memory.toString() + ']);\\n';\n      hardcode += 'var activate = ' + this.optimized.activate.toString() + ';\\n';\n      hardcode += 'var propagate = ' + this.optimized.propagate.toString() + ';\\n';\n      hardcode += 'onmessage = function(e) {\\n' + 'if (e.data.action == \\'startTraining\\') {\\n' + 'train(' + JSON.stringify(set) + ',' + JSON.stringify(workerOptions) + ');\\n' + '}\\n' + '}';\n\n      var workerSourceCode = workerFunction + '\\n' + hardcode;\n      var blob = new Blob([workerSourceCode]);\n      var blobURL = window.URL.createObjectURL(blob);\n\n      return new Worker(blobURL);\n    }\n\n    // returns a copy of the network\n\n  }, {\n    key: 'clone',\n    value: function clone() {\n      return Network.fromJSON(this.toJSON());\n    }\n\n    /**\n     * Creates a static String to store the source code of the functions\n     *  that are identical for all the workers (train, _trainSet, test)\n     *\n     * @return {String} Source code that can train a network inside a worker.\n     * @static\n     */\n\n  }], [{\n    key: 'getWorkerSharedFunctions',\n    value: function getWorkerSharedFunctions() {\n      // If we already computed the source code for the shared functions\n      if (typeof Network._SHARED_WORKER_FUNCTIONS !== 'undefined') return Network._SHARED_WORKER_FUNCTIONS;\n\n      // Otherwise compute and return the source code\n      // We compute them by simply copying the source code of the train, _trainSet and test functions\n      //  using the .toString() method\n\n      // Load and name the train function\n      var train_f = _Trainer2.default.prototype.train.toString();\n      train_f = train_f.replace(/this._trainSet/g, '_trainSet');\n      train_f = train_f.replace(/this.test/g, 'test');\n      train_f = train_f.replace(/this.crossValidate/g, 'crossValidate');\n      train_f = train_f.replace('crossValidate = true', '// REMOVED BY WORKER');\n\n      // Load and name the _trainSet function\n      var _trainSet_f = _Trainer2.default.prototype._trainSet.toString().replace(/this.network./g, '');\n\n      // Load and name the test function\n      var test_f = _Trainer2.default.prototype.test.toString().replace(/this.network./g, '');\n\n      return Network._SHARED_WORKER_FUNCTIONS = train_f + '\\n' + _trainSet_f + '\\n' + test_f;\n    }\n  }, {\n    key: 'fromJSON',\n    value: function fromJSON(json) {\n      var neurons = [];\n\n      var layers = {\n        input: new _Layer2.default(),\n        hidden: [],\n        output: new _Layer2.default()\n      };\n\n      for (var i = 0; i < json.neurons.length; i++) {\n        var config = json.neurons[i];\n\n        var neuron = new _Neuron2.default();\n        neuron.trace.elegibility = {};\n        neuron.trace.extended = {};\n        neuron.state = config.state;\n        neuron.old = config.old;\n        neuron.activation = config.activation;\n        neuron.bias = config.bias;\n        neuron.squash = config.squash in _Neuron2.default.squash ? _Neuron2.default.squash[config.squash] : _Neuron2.default.squash.LOGISTIC;\n        neurons.push(neuron);\n\n        if (config.layer == 'input') layers.input.add(neuron);else if (config.layer == 'output') layers.output.add(neuron);else {\n          if (typeof layers.hidden[config.layer] == 'undefined') layers.hidden[config.layer] = new _Layer2.default();\n          layers.hidden[config.layer].add(neuron);\n        }\n      }\n\n      for (var i = 0; i < json.connections.length; i++) {\n        var config = json.connections[i];\n        var from = neurons[config.from];\n        var to = neurons[config.to];\n        var weight = config.weight;\n        var gater = neurons[config.gater];\n\n        var connection = from.project(to, weight);\n        if (gater) gater.gate(connection);\n      }\n\n      return new Network(layers);\n    }\n  }]);\n\n  return Network;\n}();\n\nexports.default = Network;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Connection = __webpack_require__(5);\n\nvar _Connection2 = _interopRequireDefault(_Connection);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar neurons = 0;\n\n// squashing functions\nvar squash = {\n  // eq. 5 & 5'\n  LOGISTIC: function LOGISTIC(x, derivate) {\n    var fx = 1 / (1 + Math.exp(-x));\n    if (!derivate) return fx;\n    return fx * (1 - fx);\n  },\n  TANH: function TANH(x, derivate) {\n    if (derivate) return 1 - Math.pow(Math.tanh(x), 2);\n    return Math.tanh(x);\n  },\n  IDENTITY: function IDENTITY(x, derivate) {\n    return derivate ? 1 : x;\n  },\n  HLIM: function HLIM(x, derivate) {\n    return derivate ? 1 : x > 0 ? 1 : 0;\n  },\n  RELU: function RELU(x, derivate) {\n    if (derivate) return x > 0 ? 1 : 0;\n    return x > 0 ? x : 0;\n  }\n};\n\nvar Neuron = function () {\n  function Neuron() {\n    _classCallCheck(this, Neuron);\n\n    this.ID = Neuron.uid();\n\n    this.connections = {\n      inputs: {},\n      projected: {},\n      gated: {}\n    };\n    this.error = {\n      responsibility: 0,\n      projected: 0,\n      gated: 0\n    };\n    this.trace = {\n      elegibility: {},\n      extended: {},\n      influences: {}\n    };\n    this.state = 0;\n    this.old = 0;\n    this.activation = 0;\n    this.selfconnection = new _Connection2.default(this, this, 0); // weight = 0 -> not connected\n    this.squash = Neuron.squash.LOGISTIC;\n    this.neighboors = {};\n    this.bias = Math.random() * .2 - .1;\n  }\n\n  // activate the neuron\n\n\n  _createClass(Neuron, [{\n    key: 'activate',\n    value: function activate(input) {\n      // activation from enviroment (for input neurons)\n      if (typeof input != 'undefined') {\n        this.activation = input;\n        this.derivative = 0;\n        this.bias = 0;\n        return this.activation;\n      }\n\n      // old state\n      this.old = this.state;\n\n      // eq. 15\n      this.state = this.selfconnection.gain * this.selfconnection.weight * this.state + this.bias;\n\n      for (var i in this.connections.inputs) {\n        var input = this.connections.inputs[i];\n        this.state += input.from.activation * input.weight * input.gain;\n      }\n\n      // eq. 16\n      this.activation = this.squash(this.state);\n\n      // f'(s)\n      this.derivative = this.squash(this.state, true);\n\n      // update traces\n      var influences = [];\n      for (var id in this.trace.extended) {\n        // extended elegibility trace\n        var neuron = this.neighboors[id];\n\n        // if gated neuron's selfconnection is gated by this unit, the influence keeps track of the neuron's old state\n        var influence = neuron.selfconnection.gater == this ? neuron.old : 0;\n\n        // index runs over all the incoming connections to the gated neuron that are gated by this unit\n        for (var incoming in this.trace.influences[neuron.ID]) {\n          // captures the effect that has an input connection to this unit, on a neuron that is gated by this unit\n          influence += this.trace.influences[neuron.ID][incoming].weight * this.trace.influences[neuron.ID][incoming].from.activation;\n        }\n        influences[neuron.ID] = influence;\n      }\n\n      for (var i in this.connections.inputs) {\n        var input = this.connections.inputs[i];\n\n        // elegibility trace - Eq. 17\n        this.trace.elegibility[input.ID] = this.selfconnection.gain * this.selfconnection.weight * this.trace.elegibility[input.ID] + input.gain * input.from.activation;\n\n        for (var id in this.trace.extended) {\n          // extended elegibility trace\n          var xtrace = this.trace.extended[id];\n          var neuron = this.neighboors[id];\n          var influence = influences[neuron.ID];\n\n          // eq. 18\n          xtrace[input.ID] = neuron.selfconnection.gain * neuron.selfconnection.weight * xtrace[input.ID] + this.derivative * this.trace.elegibility[input.ID] * influence;\n        }\n      }\n\n      //  update gated connection's gains\n      for (var connection in this.connections.gated) {\n        this.connections.gated[connection].gain = this.activation;\n      }\n\n      return this.activation;\n    }\n\n    // back-propagate the error\n\n  }, {\n    key: 'propagate',\n    value: function propagate(rate, target) {\n      // error accumulator\n      var error = 0;\n\n      // whether or not this neuron is in the output layer\n      var isOutput = typeof target != 'undefined';\n\n      // output neurons get their error from the enviroment\n      if (isOutput) this.error.responsibility = this.error.projected = target - this.activation; // Eq. 10\n\n      else // the rest of the neuron compute their error responsibilities by backpropagation\n        {\n          // error responsibilities from all the connections projected from this neuron\n          for (var id in this.connections.projected) {\n            var connection = this.connections.projected[id];\n            var neuron = connection.to;\n            // Eq. 21\n            error += neuron.error.responsibility * connection.gain * connection.weight;\n          }\n\n          // projected error responsibility\n          this.error.projected = this.derivative * error;\n\n          error = 0;\n          // error responsibilities from all the connections gated by this neuron\n          for (var id in this.trace.extended) {\n            var neuron = this.neighboors[id]; // gated neuron\n            var influence = neuron.selfconnection.gater == this ? neuron.old : 0; // if gated neuron's selfconnection is gated by this neuron\n\n            // index runs over all the connections to the gated neuron that are gated by this neuron\n            for (var input in this.trace.influences[id]) {\n              // captures the effect that the input connection of this neuron have, on a neuron which its input/s is/are gated by this neuron\n              influence += this.trace.influences[id][input].weight * this.trace.influences[neuron.ID][input].from.activation;\n            }\n            // eq. 22\n            error += neuron.error.responsibility * influence;\n          }\n\n          // gated error responsibility\n          this.error.gated = this.derivative * error;\n\n          // error responsibility - Eq. 23\n          this.error.responsibility = this.error.projected + this.error.gated;\n        }\n\n      // learning rate\n      rate = rate || .1;\n\n      // adjust all the neuron's incoming connections\n      for (var id in this.connections.inputs) {\n        var input = this.connections.inputs[id];\n\n        // Eq. 24\n        var gradient = this.error.projected * this.trace.elegibility[input.ID];\n        for (var id in this.trace.extended) {\n          var neuron = this.neighboors[id];\n          gradient += neuron.error.responsibility * this.trace.extended[neuron.ID][input.ID];\n        }\n        input.weight += rate * gradient; // adjust weights - aka learn\n      }\n\n      // adjust bias\n      this.bias += rate * this.error.responsibility;\n    }\n  }, {\n    key: 'project',\n    value: function project(neuron, weight) {\n      // self-connection\n      if (neuron == this) {\n        this.selfconnection.weight = 1;\n        return this.selfconnection;\n      }\n\n      // check if connection already exists\n      var connected = this.connected(neuron);\n      if (connected && connected.type == 'projected') {\n        // update connection\n        if (typeof weight != 'undefined') connected.connection.weight = weight;\n        // return existing connection\n        return connected.connection;\n      } else {\n        // create a new connection\n        var connection = new _Connection2.default(this, neuron, weight);\n      }\n\n      // reference all the connections and traces\n      this.connections.projected[connection.ID] = connection;\n      this.neighboors[neuron.ID] = neuron;\n      neuron.connections.inputs[connection.ID] = connection;\n      neuron.trace.elegibility[connection.ID] = 0;\n\n      for (var id in neuron.trace.extended) {\n        var trace = neuron.trace.extended[id];\n        trace[connection.ID] = 0;\n      }\n\n      return connection;\n    }\n  }, {\n    key: 'gate',\n    value: function gate(connection) {\n      // add connection to gated list\n      this.connections.gated[connection.ID] = connection;\n\n      var neuron = connection.to;\n      if (!(neuron.ID in this.trace.extended)) {\n        // extended trace\n        this.neighboors[neuron.ID] = neuron;\n        var xtrace = this.trace.extended[neuron.ID] = {};\n        for (var id in this.connections.inputs) {\n          var input = this.connections.inputs[id];\n          xtrace[input.ID] = 0;\n        }\n      }\n\n      // keep track\n      if (neuron.ID in this.trace.influences) this.trace.influences[neuron.ID].push(connection);else this.trace.influences[neuron.ID] = [connection];\n\n      // set gater\n      connection.gater = this;\n    }\n\n    // returns true or false whether the neuron is self-connected or not\n\n  }, {\n    key: 'selfconnected',\n    value: function selfconnected() {\n      return this.selfconnection.weight !== 0;\n    }\n\n    // returns true or false whether the neuron is connected to another neuron (parameter)\n\n  }, {\n    key: 'connected',\n    value: function connected(neuron) {\n      var result = {\n        type: null,\n        connection: false\n      };\n\n      if (this == neuron) {\n        if (this.selfconnected()) {\n          result.type = 'selfconnection';\n          result.connection = this.selfconnection;\n          return result;\n        } else return false;\n      }\n\n      for (var type in this.connections) {\n        for (var connection in this.connections[type]) {\n          var connection = this.connections[type][connection];\n          if (connection.to == neuron) {\n            result.type = type;\n            result.connection = connection;\n            return result;\n          } else if (connection.from == neuron) {\n            result.type = type;\n            result.connection = connection;\n            return result;\n          }\n        }\n      }\n\n      return false;\n    }\n\n    // clears all the traces (the neuron forgets it's context, but the connections remain intact)\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      for (var trace in this.trace.elegibility) {\n        this.trace.elegibility[trace] = 0;\n      }\n\n      for (var trace in this.trace.extended) {\n        for (var extended in this.trace.extended[trace]) {\n          this.trace.extended[trace][extended] = 0;\n        }\n      }\n\n      this.error.responsibility = this.error.projected = this.error.gated = 0;\n    }\n\n    // all the connections are randomized and the traces are cleared\n\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.clear();\n\n      for (var type in this.connections) {\n        for (var connection in this.connections[type]) {\n          this.connections[type][connection].weight = Math.random() * .2 - .1;\n        }\n      }\n\n      this.bias = Math.random() * .2 - .1;\n      this.old = this.state = this.activation = 0;\n    }\n\n    // hardcodes the behaviour of the neuron into an optimized function\n\n  }, {\n    key: 'optimize',\n    value: function optimize(optimized, layer) {\n\n      optimized = optimized || {};\n      var store_activation = [];\n      var store_trace = [];\n      var store_propagation = [];\n      var varID = optimized.memory || 0;\n      var neurons = optimized.neurons || 1;\n      var inputs = optimized.inputs || [];\n      var targets = optimized.targets || [];\n      var outputs = optimized.outputs || [];\n      var variables = optimized.variables || {};\n      var activation_sentences = optimized.activation_sentences || [];\n      var trace_sentences = optimized.trace_sentences || [];\n      var propagation_sentences = optimized.propagation_sentences || [];\n      var layers = optimized.layers || { __count: 0, __neuron: 0 };\n\n      // allocate sentences\n      var allocate = function allocate(store) {\n        var allocated = layer in layers && store[layers.__count];\n        if (!allocated) {\n          layers.__count = store.push([]) - 1;\n          layers[layer] = layers.__count;\n        }\n      };\n      allocate(activation_sentences);\n      allocate(trace_sentences);\n      allocate(propagation_sentences);\n      var currentLayer = layers.__count;\n\n      // get/reserve space in memory by creating a unique ID for a variablel\n      var getVar = function getVar() {\n        var args = Array.prototype.slice.call(arguments);\n\n        if (args.length == 1) {\n          if (args[0] == 'target') {\n            var id = 'target_' + targets.length;\n            targets.push(varID);\n          } else var id = args[0];\n          if (id in variables) return variables[id];\n          return variables[id] = {\n            value: 0,\n            id: varID++\n          };\n        } else {\n          var extended = args.length > 2;\n          if (extended) var value = args.pop();\n\n          var unit = args.shift();\n          var prop = args.pop();\n\n          if (!extended) var value = unit[prop];\n\n          var id = prop + '_';\n          for (var i = 0; i < args.length; i++) {\n            id += args[i] + '_';\n          }id += unit.ID;\n          if (id in variables) return variables[id];\n\n          return variables[id] = {\n            value: value,\n            id: varID++\n          };\n        }\n      };\n\n      // build sentence\n      var buildSentence = function buildSentence() {\n        var args = Array.prototype.slice.call(arguments);\n        var store = args.pop();\n        var sentence = '';\n        for (var i = 0; i < args.length; i++) {\n          if (typeof args[i] == 'string') sentence += args[i];else sentence += 'F[' + args[i].id + ']';\n        }store.push(sentence + ';');\n      };\n\n      // helper to check if an object is empty\n      var isEmpty = function isEmpty(obj) {\n        for (var prop in obj) {\n          if (obj.hasOwnProperty(prop)) return false;\n        }\n        return true;\n      };\n\n      // characteristics of the neuron\n      var noProjections = isEmpty(this.connections.projected);\n      var noGates = isEmpty(this.connections.gated);\n      var isInput = layer == 'input' ? true : isEmpty(this.connections.inputs);\n      var isOutput = layer == 'output' ? true : noProjections && noGates;\n\n      // optimize neuron's behaviour\n      var rate = getVar('rate');\n      var activation = getVar(this, 'activation');\n      if (isInput) inputs.push(activation.id);else {\n        activation_sentences[currentLayer].push(store_activation);\n        trace_sentences[currentLayer].push(store_trace);\n        propagation_sentences[currentLayer].push(store_propagation);\n        var old = getVar(this, 'old');\n        var state = getVar(this, 'state');\n        var bias = getVar(this, 'bias');\n        if (this.selfconnection.gater) var self_gain = getVar(this.selfconnection, 'gain');\n        if (this.selfconnected()) var self_weight = getVar(this.selfconnection, 'weight');\n        buildSentence(old, ' = ', state, store_activation);\n        if (this.selfconnected()) {\n          if (this.selfconnection.gater) buildSentence(state, ' = ', self_gain, ' * ', self_weight, ' * ', state, ' + ', bias, store_activation);else buildSentence(state, ' = ', self_weight, ' * ', state, ' + ', bias, store_activation);\n        } else buildSentence(state, ' = ', bias, store_activation);\n        for (var i in this.connections.inputs) {\n          var input = this.connections.inputs[i];\n          var input_activation = getVar(input.from, 'activation');\n          var input_weight = getVar(input, 'weight');\n          if (input.gater) var input_gain = getVar(input, 'gain');\n          if (this.connections.inputs[i].gater) buildSentence(state, ' += ', input_activation, ' * ', input_weight, ' * ', input_gain, store_activation);else buildSentence(state, ' += ', input_activation, ' * ', input_weight, store_activation);\n        }\n        var derivative = getVar(this, 'derivative');\n        switch (this.squash) {\n          case Neuron.squash.LOGISTIC:\n            buildSentence(activation, ' = (1 / (1 + Math.exp(-', state, ')))', store_activation);\n            buildSentence(derivative, ' = ', activation, ' * (1 - ', activation, ')', store_activation);\n            break;\n          case Neuron.squash.TANH:\n            var eP = getVar('aux');\n            var eN = getVar('aux_2');\n            buildSentence(eP, ' = Math.exp(', state, ')', store_activation);\n            buildSentence(eN, ' = 1 / ', eP, store_activation);\n            buildSentence(activation, ' = (', eP, ' - ', eN, ') / (', eP, ' + ', eN, ')', store_activation);\n            buildSentence(derivative, ' = 1 - (', activation, ' * ', activation, ')', store_activation);\n            break;\n          case Neuron.squash.IDENTITY:\n            buildSentence(activation, ' = ', state, store_activation);\n            buildSentence(derivative, ' = 1', store_activation);\n            break;\n          case Neuron.squash.HLIM:\n            buildSentence(activation, ' = +(', state, ' > 0)', store_activation);\n            buildSentence(derivative, ' = 1', store_activation);\n            break;\n          case Neuron.squash.RELU:\n            buildSentence(activation, ' = ', state, ' > 0 ? ', state, ' : 0', store_activation);\n            buildSentence(derivative, ' = ', state, ' > 0 ? 1 : 0', store_activation);\n            break;\n        }\n\n        for (var id in this.trace.extended) {\n          // calculate extended elegibility traces in advance\n          var neuron = this.neighboors[id];\n          var influence = getVar('influences[' + neuron.ID + ']');\n          var neuron_old = getVar(neuron, 'old');\n          var initialized = false;\n          if (neuron.selfconnection.gater == this) {\n            buildSentence(influence, ' = ', neuron_old, store_trace);\n            initialized = true;\n          }\n          for (var incoming in this.trace.influences[neuron.ID]) {\n            var incoming_weight = getVar(this.trace.influences[neuron.ID][incoming], 'weight');\n            var incoming_activation = getVar(this.trace.influences[neuron.ID][incoming].from, 'activation');\n\n            if (initialized) buildSentence(influence, ' += ', incoming_weight, ' * ', incoming_activation, store_trace);else {\n              buildSentence(influence, ' = ', incoming_weight, ' * ', incoming_activation, store_trace);\n              initialized = true;\n            }\n          }\n        }\n\n        for (var i in this.connections.inputs) {\n          var input = this.connections.inputs[i];\n          if (input.gater) var input_gain = getVar(input, 'gain');\n          var input_activation = getVar(input.from, 'activation');\n          var trace = getVar(this, 'trace', 'elegibility', input.ID, this.trace.elegibility[input.ID]);\n          if (this.selfconnected()) {\n            if (this.selfconnection.gater) {\n              if (input.gater) buildSentence(trace, ' = ', self_gain, ' * ', self_weight, ' * ', trace, ' + ', input_gain, ' * ', input_activation, store_trace);else buildSentence(trace, ' = ', self_gain, ' * ', self_weight, ' * ', trace, ' + ', input_activation, store_trace);\n            } else {\n              if (input.gater) buildSentence(trace, ' = ', self_weight, ' * ', trace, ' + ', input_gain, ' * ', input_activation, store_trace);else buildSentence(trace, ' = ', self_weight, ' * ', trace, ' + ', input_activation, store_trace);\n            }\n          } else {\n            if (input.gater) buildSentence(trace, ' = ', input_gain, ' * ', input_activation, store_trace);else buildSentence(trace, ' = ', input_activation, store_trace);\n          }\n          for (var id in this.trace.extended) {\n            // extended elegibility trace\n            var neuron = this.neighboors[id];\n            var influence = getVar('influences[' + neuron.ID + ']');\n\n            var trace = getVar(this, 'trace', 'elegibility', input.ID, this.trace.elegibility[input.ID]);\n            var xtrace = getVar(this, 'trace', 'extended', neuron.ID, input.ID, this.trace.extended[neuron.ID][input.ID]);\n            if (neuron.selfconnected()) var neuron_self_weight = getVar(neuron.selfconnection, 'weight');\n            if (neuron.selfconnection.gater) var neuron_self_gain = getVar(neuron.selfconnection, 'gain');\n            if (neuron.selfconnected()) {\n              if (neuron.selfconnection.gater) buildSentence(xtrace, ' = ', neuron_self_gain, ' * ', neuron_self_weight, ' * ', xtrace, ' + ', derivative, ' * ', trace, ' * ', influence, store_trace);else buildSentence(xtrace, ' = ', neuron_self_weight, ' * ', xtrace, ' + ', derivative, ' * ', trace, ' * ', influence, store_trace);\n            } else buildSentence(xtrace, ' = ', derivative, ' * ', trace, ' * ', influence, store_trace);\n          }\n        }\n        for (var connection in this.connections.gated) {\n          var gated_gain = getVar(this.connections.gated[connection], 'gain');\n          buildSentence(gated_gain, ' = ', activation, store_activation);\n        }\n      }\n      if (!isInput) {\n        var responsibility = getVar(this, 'error', 'responsibility', this.error.responsibility);\n        if (isOutput) {\n          var target = getVar('target');\n          buildSentence(responsibility, ' = ', target, ' - ', activation, store_propagation);\n          for (var id in this.connections.inputs) {\n            var input = this.connections.inputs[id];\n            var trace = getVar(this, 'trace', 'elegibility', input.ID, this.trace.elegibility[input.ID]);\n            var input_weight = getVar(input, 'weight');\n            buildSentence(input_weight, ' += ', rate, ' * (', responsibility, ' * ', trace, ')', store_propagation);\n          }\n          outputs.push(activation.id);\n        } else {\n          if (!noProjections && !noGates) {\n            var error = getVar('aux');\n            for (var id in this.connections.projected) {\n              var connection = this.connections.projected[id];\n              var neuron = connection.to;\n              var connection_weight = getVar(connection, 'weight');\n              var neuron_responsibility = getVar(neuron, 'error', 'responsibility', neuron.error.responsibility);\n              if (connection.gater) {\n                var connection_gain = getVar(connection, 'gain');\n                buildSentence(error, ' += ', neuron_responsibility, ' * ', connection_gain, ' * ', connection_weight, store_propagation);\n              } else buildSentence(error, ' += ', neuron_responsibility, ' * ', connection_weight, store_propagation);\n            }\n            var projected = getVar(this, 'error', 'projected', this.error.projected);\n            buildSentence(projected, ' = ', derivative, ' * ', error, store_propagation);\n            buildSentence(error, ' = 0', store_propagation);\n            for (var id in this.trace.extended) {\n              var neuron = this.neighboors[id];\n              var influence = getVar('aux_2');\n              var neuron_old = getVar(neuron, 'old');\n              if (neuron.selfconnection.gater == this) buildSentence(influence, ' = ', neuron_old, store_propagation);else buildSentence(influence, ' = 0', store_propagation);\n              for (var input in this.trace.influences[neuron.ID]) {\n                var connection = this.trace.influences[neuron.ID][input];\n                var connection_weight = getVar(connection, 'weight');\n                var neuron_activation = getVar(connection.from, 'activation');\n                buildSentence(influence, ' += ', connection_weight, ' * ', neuron_activation, store_propagation);\n              }\n              var neuron_responsibility = getVar(neuron, 'error', 'responsibility', neuron.error.responsibility);\n              buildSentence(error, ' += ', neuron_responsibility, ' * ', influence, store_propagation);\n            }\n            var gated = getVar(this, 'error', 'gated', this.error.gated);\n            buildSentence(gated, ' = ', derivative, ' * ', error, store_propagation);\n            buildSentence(responsibility, ' = ', projected, ' + ', gated, store_propagation);\n            for (var id in this.connections.inputs) {\n              var input = this.connections.inputs[id];\n              var gradient = getVar('aux');\n              var trace = getVar(this, 'trace', 'elegibility', input.ID, this.trace.elegibility[input.ID]);\n              buildSentence(gradient, ' = ', projected, ' * ', trace, store_propagation);\n              for (var id in this.trace.extended) {\n                var neuron = this.neighboors[id];\n                var neuron_responsibility = getVar(neuron, 'error', 'responsibility', neuron.error.responsibility);\n                var xtrace = getVar(this, 'trace', 'extended', neuron.ID, input.ID, this.trace.extended[neuron.ID][input.ID]);\n                buildSentence(gradient, ' += ', neuron_responsibility, ' * ', xtrace, store_propagation);\n              }\n              var input_weight = getVar(input, 'weight');\n              buildSentence(input_weight, ' += ', rate, ' * ', gradient, store_propagation);\n            }\n          } else if (noGates) {\n            buildSentence(responsibility, ' = 0', store_propagation);\n            for (var id in this.connections.projected) {\n              var connection = this.connections.projected[id];\n              var neuron = connection.to;\n              var connection_weight = getVar(connection, 'weight');\n              var neuron_responsibility = getVar(neuron, 'error', 'responsibility', neuron.error.responsibility);\n              if (connection.gater) {\n                var connection_gain = getVar(connection, 'gain');\n                buildSentence(responsibility, ' += ', neuron_responsibility, ' * ', connection_gain, ' * ', connection_weight, store_propagation);\n              } else buildSentence(responsibility, ' += ', neuron_responsibility, ' * ', connection_weight, store_propagation);\n            }\n            buildSentence(responsibility, ' *= ', derivative, store_propagation);\n            for (var id in this.connections.inputs) {\n              var input = this.connections.inputs[id];\n              var trace = getVar(this, 'trace', 'elegibility', input.ID, this.trace.elegibility[input.ID]);\n              var input_weight = getVar(input, 'weight');\n              buildSentence(input_weight, ' += ', rate, ' * (', responsibility, ' * ', trace, ')', store_propagation);\n            }\n          } else if (noProjections) {\n            buildSentence(responsibility, ' = 0', store_propagation);\n            for (var id in this.trace.extended) {\n              var neuron = this.neighboors[id];\n              var influence = getVar('aux');\n              var neuron_old = getVar(neuron, 'old');\n              if (neuron.selfconnection.gater == this) buildSentence(influence, ' = ', neuron_old, store_propagation);else buildSentence(influence, ' = 0', store_propagation);\n              for (var input in this.trace.influences[neuron.ID]) {\n                var connection = this.trace.influences[neuron.ID][input];\n                var connection_weight = getVar(connection, 'weight');\n                var neuron_activation = getVar(connection.from, 'activation');\n                buildSentence(influence, ' += ', connection_weight, ' * ', neuron_activation, store_propagation);\n              }\n              var neuron_responsibility = getVar(neuron, 'error', 'responsibility', neuron.error.responsibility);\n              buildSentence(responsibility, ' += ', neuron_responsibility, ' * ', influence, store_propagation);\n            }\n            buildSentence(responsibility, ' *= ', derivative, store_propagation);\n            for (var id in this.connections.inputs) {\n              var input = this.connections.inputs[id];\n              var gradient = getVar('aux');\n              buildSentence(gradient, ' = 0', store_propagation);\n              for (var id in this.trace.extended) {\n                var neuron = this.neighboors[id];\n                var neuron_responsibility = getVar(neuron, 'error', 'responsibility', neuron.error.responsibility);\n                var xtrace = getVar(this, 'trace', 'extended', neuron.ID, input.ID, this.trace.extended[neuron.ID][input.ID]);\n                buildSentence(gradient, ' += ', neuron_responsibility, ' * ', xtrace, store_propagation);\n              }\n              var input_weight = getVar(input, 'weight');\n              buildSentence(input_weight, ' += ', rate, ' * ', gradient, store_propagation);\n            }\n          }\n        }\n        buildSentence(bias, ' += ', rate, ' * ', responsibility, store_propagation);\n      }\n      return {\n        memory: varID,\n        neurons: neurons + 1,\n        inputs: inputs,\n        outputs: outputs,\n        targets: targets,\n        variables: variables,\n        activation_sentences: activation_sentences,\n        trace_sentences: trace_sentences,\n        propagation_sentences: propagation_sentences,\n        layers: layers\n      };\n    }\n  }], [{\n    key: 'uid',\n    value: function uid() {\n      return neurons++;\n    }\n  }, {\n    key: 'quantity',\n    value: function quantity() {\n      return {\n        neurons: neurons,\n        connections: _Connection.connections\n      };\n    }\n  }]);\n\n  return Neuron;\n}();\n\nNeuron.squash = squash;\nexports.default = Neuron;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n//+ Jonas Raoni Soares Silva\n//@ http://jsfromhell.com/array/shuffle [v1.0]\nfunction shuffleInplace(o) {\n  //v1.0\n  for (var j, x, i = o.length; i; j = Math.floor(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x) {}\n  return o;\n};\n\n// Built-in cost functions\nvar cost = {\n  // Eq. 9\n  CROSS_ENTROPY: function CROSS_ENTROPY(target, output) {\n    var crossentropy = 0;\n    for (var i in output) {\n      crossentropy -= target[i] * Math.log(output[i] + 1e-15) + (1 - target[i]) * Math.log(1 + 1e-15 - output[i]);\n    } // +1e-15 is a tiny push away to avoid Math.log(0)\n    return crossentropy;\n  },\n  MSE: function MSE(target, output) {\n    var mse = 0;\n    for (var i = 0; i < output.length; i++) {\n      mse += Math.pow(target[i] - output[i], 2);\n    }return mse / output.length;\n  },\n  BINARY: function BINARY(target, output) {\n    var misses = 0;\n    for (var i = 0; i < output.length; i++) {\n      misses += Math.round(target[i] * 2) != Math.round(output[i] * 2);\n    }return misses;\n  }\n};\n\nvar Trainer = function () {\n  function Trainer(network, options) {\n    _classCallCheck(this, Trainer);\n\n    options = options || {};\n    this.network = network;\n    this.rate = options.rate || .2;\n    this.iterations = options.iterations || 100000;\n    this.error = options.error || .005;\n    this.cost = options.cost || null;\n    this.crossValidate = options.crossValidate || null;\n  }\n\n  // trains any given set to a network\n\n\n  _createClass(Trainer, [{\n    key: 'train',\n    value: function train(set, options) {\n      var error = 1;\n      var iterations = bucketSize = 0;\n      var abort = false;\n      var currentRate;\n      var cost = options && options.cost || this.cost || Trainer.cost.MSE;\n      var crossValidate = false,\n          testSet,\n          trainSet;\n\n      var start = Date.now();\n\n      if (options) {\n        if (options.iterations) this.iterations = options.iterations;\n        if (options.error) this.error = options.error;\n        if (options.rate) this.rate = options.rate;\n        if (options.cost) this.cost = options.cost;\n        if (options.schedule) this.schedule = options.schedule;\n        if (options.customLog) {\n          // for backward compatibility with code that used customLog\n          console.log('Deprecated: use schedule instead of customLog');\n          this.schedule = options.customLog;\n        }\n        if (this.crossValidate || options.crossValidate) {\n          if (!this.crossValidate) this.crossValidate = {};\n          crossValidate = true;\n          if (options.crossValidate.testSize) this.crossValidate.testSize = options.crossValidate.testSize;\n          if (options.crossValidate.testError) this.crossValidate.testError = options.crossValidate.testError;\n        }\n      }\n\n      currentRate = this.rate;\n      if (Array.isArray(this.rate)) {\n        var bucketSize = Math.floor(this.iterations / this.rate.length);\n      }\n\n      if (crossValidate) {\n        var numTrain = Math.ceil((1 - this.crossValidate.testSize) * set.length);\n        trainSet = set.slice(0, numTrain);\n        testSet = set.slice(numTrain);\n      }\n\n      var lastError = 0;\n      while (!abort && iterations < this.iterations && error > this.error) {\n        if (crossValidate && error <= this.crossValidate.testError) {\n          break;\n        }\n\n        var currentSetSize = set.length;\n        error = 0;\n        iterations++;\n\n        if (bucketSize > 0) {\n          var currentBucket = Math.floor(iterations / bucketSize);\n          currentRate = this.rate[currentBucket] || currentRate;\n        }\n\n        if (typeof this.rate === 'function') {\n          currentRate = this.rate(iterations, lastError);\n        }\n\n        if (crossValidate) {\n          this._trainSet(trainSet, currentRate, cost);\n          error += this.test(testSet).error;\n          currentSetSize = 1;\n        } else {\n          error += this._trainSet(set, currentRate, cost);\n          currentSetSize = set.length;\n        }\n\n        // check error\n        error /= currentSetSize;\n        lastError = error;\n\n        if (options) {\n          if (this.schedule && this.schedule.every && iterations % this.schedule.every == 0) abort = this.schedule.do({ error: error, iterations: iterations, rate: currentRate });else if (options.log && iterations % options.log == 0) {\n            console.log('iterations', iterations, 'error', error, 'rate', currentRate);\n          }\n          ;\n          if (options.shuffle) shuffleInplace(set);\n        }\n      }\n\n      var results = {\n        error: error,\n        iterations: iterations,\n        time: Date.now() - start\n      };\n\n      return results;\n    }\n\n    // trains any given set to a network, using a WebWorker (only for the browser). Returns a Promise of the results.\n\n  }, {\n    key: 'trainAsync',\n    value: function trainAsync(set, options) {\n      var train = this.workerTrain.bind(this);\n      return new Promise(function (resolve, reject) {\n        try {\n          train(set, resolve, options, true);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    }\n\n    // preforms one training epoch and returns the error (private function used in this.train)\n\n  }, {\n    key: '_trainSet',\n    value: function _trainSet(set, currentRate, costFunction) {\n      var errorSum = 0;\n      for (var i = 0; i < set.length; i++) {\n        var input = set[i].input;\n        var target = set[i].output;\n\n        var output = this.network.activate(input);\n        this.network.propagate(currentRate, target);\n\n        errorSum += costFunction(target, output);\n      }\n      return errorSum;\n    }\n\n    // tests a set and returns the error and elapsed time\n\n  }, {\n    key: 'test',\n    value: function test(set, options) {\n      var error = 0;\n      var input, output, target;\n      var cost = options && options.cost || this.cost || Trainer.cost.MSE;\n\n      var start = Date.now();\n\n      for (var i = 0; i < set.length; i++) {\n        input = set[i].input;\n        target = set[i].output;\n        output = this.network.activate(input);\n        error += cost(target, output);\n      }\n\n      error /= set.length;\n\n      var results = {\n        error: error,\n        time: Date.now() - start\n      };\n\n      return results;\n    }\n\n    // trains any given set to a network using a WebWorker [deprecated: use trainAsync instead]\n\n  }, {\n    key: 'workerTrain',\n    value: function workerTrain(set, callback, options, suppressWarning) {\n      if (!suppressWarning) {\n        console.warn('Deprecated: do not use `workerTrain`, use `trainAsync` instead.');\n      }\n      var that = this;\n\n      if (!this.network.optimized) this.network.optimize();\n\n      // Create a new worker\n      var worker = this.network.worker(this.network.optimized.memory, set, options);\n\n      // train the worker\n      worker.onmessage = function (e) {\n        switch (e.data.action) {\n          case 'done':\n            var iterations = e.data.message.iterations;\n            var error = e.data.message.error;\n            var time = e.data.message.time;\n\n            that.network.optimized.ownership(e.data.memoryBuffer);\n\n            // Done callback\n            callback({\n              error: error,\n              iterations: iterations,\n              time: time\n            });\n\n            // Delete the worker and all its associated memory\n            worker.terminate();\n            break;\n\n          case 'log':\n            console.log(e.data.message);\n\n          case 'schedule':\n            if (options && options.schedule && typeof options.schedule.do === 'function') {\n              var scheduled = options.schedule.do;\n              scheduled(e.data.message);\n            }\n            break;\n        }\n      };\n\n      // Start the worker\n      worker.postMessage({ action: 'startTraining' });\n    }\n\n    // trains an XOR to the network\n\n  }, {\n    key: 'XOR',\n    value: function XOR(options) {\n      if (this.network.inputs() != 2 || this.network.outputs() != 1) throw new Error('Incompatible network (2 inputs, 1 output)');\n\n      var defaults = {\n        iterations: 100000,\n        log: false,\n        shuffle: true,\n        cost: Trainer.cost.MSE\n      };\n\n      if (options) for (var i in options) {\n        defaults[i] = options[i];\n      }return this.train([{\n        input: [0, 0],\n        output: [0]\n      }, {\n        input: [1, 0],\n        output: [1]\n      }, {\n        input: [0, 1],\n        output: [1]\n      }, {\n        input: [1, 1],\n        output: [0]\n      }], defaults);\n    }\n\n    // trains the network to pass a Distracted Sequence Recall test\n\n  }, {\n    key: 'DSR',\n    value: function DSR(options) {\n      options = options || {};\n\n      var targets = options.targets || [2, 4, 7, 8];\n      var distractors = options.distractors || [3, 5, 6, 9];\n      var prompts = options.prompts || [0, 1];\n      var length = options.length || 24;\n      var criterion = options.success || 0.95;\n      var iterations = options.iterations || 100000;\n      var rate = options.rate || .1;\n      var log = options.log || 0;\n      var schedule = options.schedule || {};\n      var cost = options.cost || this.cost || Trainer.cost.CROSS_ENTROPY;\n\n      var trial, correct, i, j, success;\n      trial = correct = i = j = success = 0;\n      var error = 1,\n          symbols = targets.length + distractors.length + prompts.length;\n\n      var noRepeat = function noRepeat(range, avoid) {\n        var number = Math.random() * range | 0;\n        var used = false;\n        for (var i in avoid) {\n          if (number == avoid[i]) used = true;\n        }return used ? noRepeat(range, avoid) : number;\n      };\n\n      var equal = function equal(prediction, output) {\n        for (var i in prediction) {\n          if (Math.round(prediction[i]) != output[i]) return false;\n        }return true;\n      };\n\n      var start = Date.now();\n\n      while (trial < iterations && (success < criterion || trial % 1000 != 0)) {\n        // generate sequence\n        var sequence = [],\n            sequenceLength = length - prompts.length;\n        for (i = 0; i < sequenceLength; i++) {\n          var any = Math.random() * distractors.length | 0;\n          sequence.push(distractors[any]);\n        }\n        var indexes = [],\n            positions = [];\n        for (i = 0; i < prompts.length; i++) {\n          indexes.push(Math.random() * targets.length | 0);\n          positions.push(noRepeat(sequenceLength, positions));\n        }\n        positions = positions.sort();\n        for (i = 0; i < prompts.length; i++) {\n          sequence[positions[i]] = targets[indexes[i]];\n          sequence.push(prompts[i]);\n        }\n\n        //train sequence\n        var distractorsCorrect;\n        var targetsCorrect = distractorsCorrect = 0;\n        error = 0;\n        for (i = 0; i < length; i++) {\n          // generate input from sequence\n          var input = [];\n          for (j = 0; j < symbols; j++) {\n            input[j] = 0;\n          }input[sequence[i]] = 1;\n\n          // generate target output\n          var output = [];\n          for (j = 0; j < targets.length; j++) {\n            output[j] = 0;\n          }if (i >= sequenceLength) {\n            var index = i - sequenceLength;\n            output[indexes[index]] = 1;\n          }\n\n          // check result\n          var prediction = this.network.activate(input);\n\n          if (equal(prediction, output)) {\n            if (i < sequenceLength) distractorsCorrect++;else targetsCorrect++;\n          } else {\n            this.network.propagate(rate, output);\n          }\n\n          error += cost(output, prediction);\n\n          if (distractorsCorrect + targetsCorrect == length) correct++;\n        }\n\n        // calculate error\n        if (trial % 1000 == 0) correct = 0;\n        trial++;\n        var divideError = trial % 1000;\n        divideError = divideError == 0 ? 1000 : divideError;\n        success = correct / divideError;\n        error /= length;\n\n        // log\n        if (log && trial % log == 0) console.log('iterations:', trial, ' success:', success, ' correct:', correct, ' time:', Date.now() - start, ' error:', error);\n        if (schedule.do && schedule.every && trial % schedule.every == 0) schedule.do({\n          iterations: trial,\n          success: success,\n          error: error,\n          time: Date.now() - start,\n          correct: correct\n        });\n      }\n\n      return {\n        iterations: trial,\n        success: success,\n        error: error,\n        time: Date.now() - start\n      };\n    }\n\n    // train the network to learn an Embeded Reber Grammar\n\n  }, {\n    key: 'ERG',\n    value: function ERG(options) {\n\n      options = options || {};\n      var iterations = options.iterations || 150000;\n      var criterion = options.error || .05;\n      var rate = options.rate || .1;\n      var log = options.log || 500;\n      var cost = options.cost || this.cost || Trainer.cost.CROSS_ENTROPY;\n\n      // gramar node\n      var Node = function Node() {\n        this.paths = [];\n      };\n      Node.prototype = {\n        connect: function connect(node, value) {\n          this.paths.push({\n            node: node,\n            value: value\n          });\n          return this;\n        },\n        any: function any() {\n          if (this.paths.length == 0) return false;\n          var index = Math.random() * this.paths.length | 0;\n          return this.paths[index];\n        },\n        test: function test(value) {\n          for (var i in this.paths) {\n            if (this.paths[i].value == value) return this.paths[i];\n          }return false;\n        }\n      };\n\n      var reberGrammar = function reberGrammar() {\n\n        // build a reber grammar\n        var output = new Node();\n        var n1 = new Node().connect(output, 'E');\n        var n2 = new Node().connect(n1, 'S');\n        var n3 = new Node().connect(n1, 'V').connect(n2, 'P');\n        var n4 = new Node().connect(n2, 'X');\n        n4.connect(n4, 'S');\n        var n5 = new Node().connect(n3, 'V');\n        n5.connect(n5, 'T');\n        n2.connect(n5, 'X');\n        var n6 = new Node().connect(n4, 'T').connect(n5, 'P');\n        var input = new Node().connect(n6, 'B');\n\n        return {\n          input: input,\n          output: output\n        };\n      };\n\n      // build an embeded reber grammar\n      var embededReberGrammar = function embededReberGrammar() {\n        var reber1 = reberGrammar();\n        var reber2 = reberGrammar();\n\n        var output = new Node();\n        var n1 = new Node().connect(output, 'E');\n        reber1.output.connect(n1, 'T');\n        reber2.output.connect(n1, 'P');\n        var n2 = new Node().connect(reber1.input, 'P').connect(reber2.input, 'T');\n        var input = new Node().connect(n2, 'B');\n\n        return {\n          input: input,\n          output: output\n        };\n      };\n\n      // generate an ERG sequence\n      var generate = function generate() {\n        var node = embededReberGrammar().input;\n        var next = node.any();\n        var str = '';\n        while (next) {\n          str += next.value;\n          next = next.node.any();\n        }\n        return str;\n      };\n\n      // test if a string matches an embeded reber grammar\n      var test = function test(str) {\n        var node = embededReberGrammar().input;\n        var i = 0;\n        var ch = str.charAt(i);\n        while (i < str.length) {\n          var next = node.test(ch);\n          if (!next) return false;\n          node = next.node;\n          ch = str.charAt(++i);\n        }\n        return true;\n      };\n\n      // helper to check if the output and the target vectors match\n      var different = function different(array1, array2) {\n        var max1 = 0;\n        var i1 = -1;\n        var max2 = 0;\n        var i2 = -1;\n        for (var i in array1) {\n          if (array1[i] > max1) {\n            max1 = array1[i];\n            i1 = i;\n          }\n          if (array2[i] > max2) {\n            max2 = array2[i];\n            i2 = i;\n          }\n        }\n\n        return i1 != i2;\n      };\n\n      var iteration = 0;\n      var error = 1;\n      var table = {\n        'B': 0,\n        'P': 1,\n        'T': 2,\n        'X': 3,\n        'S': 4,\n        'E': 5\n      };\n\n      var start = Date.now();\n      while (iteration < iterations && error > criterion) {\n        var i = 0;\n        error = 0;\n\n        // ERG sequence to learn\n        var sequence = generate();\n\n        // input\n        var read = sequence.charAt(i);\n        // target\n        var predict = sequence.charAt(i + 1);\n\n        // train\n        while (i < sequence.length - 1) {\n          var input = [];\n          var target = [];\n          for (var j = 0; j < 6; j++) {\n            input[j] = 0;\n            target[j] = 0;\n          }\n          input[table[read]] = 1;\n          target[table[predict]] = 1;\n\n          var output = this.network.activate(input);\n\n          if (different(output, target)) this.network.propagate(rate, target);\n\n          read = sequence.charAt(++i);\n          predict = sequence.charAt(i + 1);\n\n          error += cost(target, output);\n        }\n        error /= sequence.length;\n        iteration++;\n        if (iteration % log == 0) {\n          console.log('iterations:', iteration, ' time:', Date.now() - start, ' error:', error);\n        }\n      }\n\n      return {\n        iterations: iteration,\n        error: error,\n        time: Date.now() - start,\n        test: test,\n        generate: generate\n      };\n    }\n  }, {\n    key: 'timingTask',\n    value: function timingTask(options) {\n\n      if (this.network.inputs() != 2 || this.network.outputs() != 1) throw new Error('Invalid Network: must have 2 inputs and one output');\n\n      if (typeof options == 'undefined') options = {};\n\n      // helper\n      function getSamples(trainingSize, testSize) {\n\n        // sample size\n        var size = trainingSize + testSize;\n\n        // generate samples\n        var t = 0;\n        var set = [];\n        for (var i = 0; i < size; i++) {\n          set.push({ input: [0, 0], output: [0] });\n        }\n        while (t < size - 20) {\n          var n = Math.round(Math.random() * 20);\n          set[t].input[0] = 1;\n          for (var j = t; j <= t + n; j++) {\n            set[j].input[1] = n / 20;\n            set[j].output[0] = 0.5;\n          }\n          t += n;\n          n = Math.round(Math.random() * 20);\n          for (var k = t + 1; k <= t + n && k < size; k++) {\n            set[k].input[1] = set[t].input[1];\n          }t += n;\n        }\n\n        // separate samples between train and test sets\n        var trainingSet = [];\n        var testSet = [];\n        for (var l = 0; l < size; l++) {\n          (l < trainingSize ? trainingSet : testSet).push(set[l]);\n        } // return samples\n        return {\n          train: trainingSet,\n          test: testSet\n        };\n      }\n\n      var iterations = options.iterations || 200;\n      var error = options.error || .005;\n      var rate = options.rate || [.03, .02];\n      var log = options.log === false ? false : options.log || 10;\n      var cost = options.cost || this.cost || Trainer.cost.MSE;\n      var trainingSamples = options.trainSamples || 7000;\n      var testSamples = options.trainSamples || 1000;\n\n      // samples for training and testing\n      var samples = getSamples(trainingSamples, testSamples);\n\n      // train\n      var result = this.train(samples.train, {\n        rate: rate,\n        log: log,\n        iterations: iterations,\n        error: error,\n        cost: cost\n      });\n\n      return {\n        train: result,\n        test: this.test(samples.test)\n      };\n    }\n  }]);\n\n  return Trainer;\n}();\n\nTrainer.cost = cost;\nexports.default = Trainer;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Architect = exports.Network = exports.Trainer = exports.Layer = exports.Neuron = undefined;\n\nvar _Neuron = __webpack_require__(2);\n\nObject.defineProperty(exports, 'Neuron', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Neuron).default;\n  }\n});\n\nvar _Layer = __webpack_require__(0);\n\nObject.defineProperty(exports, 'Layer', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Layer).default;\n  }\n});\n\nvar _Trainer = __webpack_require__(3);\n\nObject.defineProperty(exports, 'Trainer', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Trainer).default;\n  }\n});\n\nvar _Network = __webpack_require__(1);\n\nObject.defineProperty(exports, 'Network', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Network).default;\n  }\n});\n\nvar _architect = __webpack_require__(7);\n\nvar Architect = _interopRequireWildcard(_architect);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Architect = Architect;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar connections = exports.connections = 0;\n\nvar Connection = function () {\n  function Connection(from, to, weight) {\n    _classCallCheck(this, Connection);\n\n    if (!from || !to) throw new Error(\"Connection Error: Invalid neurons\");\n\n    this.ID = Connection.uid();\n    this.from = from;\n    this.to = to;\n    this.weight = typeof weight == 'undefined' ? Math.random() * .2 - .1 : weight;\n    this.gain = 1;\n    this.gater = null;\n  }\n\n  _createClass(Connection, null, [{\n    key: \"uid\",\n    value: function uid() {\n      return exports.connections = connections += 1, connections - 1;\n    }\n  }]);\n\n  return Connection;\n}();\n\nexports.default = Connection;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.connections = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Layer = __webpack_require__(0);\n\nvar _Layer2 = _interopRequireDefault(_Layer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// represents a connection from one layer to another, and keeps track of its weight and gain\nvar connections = exports.connections = 0;\n\nvar LayerConnection = function () {\n  function LayerConnection(fromLayer, toLayer, type, weights) {\n    _classCallCheck(this, LayerConnection);\n\n    this.ID = LayerConnection.uid();\n    this.from = fromLayer;\n    this.to = toLayer;\n    this.selfconnection = toLayer == fromLayer;\n    this.type = type;\n    this.connections = {};\n    this.list = [];\n    this.size = 0;\n    this.gatedfrom = [];\n\n    if (typeof this.type == 'undefined') {\n      if (fromLayer == toLayer) this.type = _Layer2.default.connectionType.ONE_TO_ONE;else this.type = _Layer2.default.connectionType.ALL_TO_ALL;\n    }\n\n    if (this.type == _Layer2.default.connectionType.ALL_TO_ALL || this.type == _Layer2.default.connectionType.ALL_TO_ELSE) {\n      for (var here in this.from.list) {\n        for (var there in this.to.list) {\n          var from = this.from.list[here];\n          var to = this.to.list[there];\n          if (this.type == _Layer2.default.connectionType.ALL_TO_ELSE && from == to) continue;\n          var connection = from.project(to, weights);\n\n          this.connections[connection.ID] = connection;\n          this.size = this.list.push(connection);\n        }\n      }\n    } else if (this.type == _Layer2.default.connectionType.ONE_TO_ONE) {\n\n      for (var neuron in this.from.list) {\n        var from = this.from.list[neuron];\n        var to = this.to.list[neuron];\n        var connection = from.project(to, weights);\n\n        this.connections[connection.ID] = connection;\n        this.size = this.list.push(connection);\n      }\n    }\n\n    fromLayer.connectedTo.push(this);\n  }\n\n  _createClass(LayerConnection, null, [{\n    key: 'uid',\n    value: function uid() {\n      return exports.connections = connections += 1, connections - 1;\n    }\n  }]);\n\n  return LayerConnection;\n}();\n\nexports.default = LayerConnection;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Perceptron = __webpack_require__(8);\n\nObject.defineProperty(exports, 'Perceptron', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Perceptron).default;\n  }\n});\n\nvar _LSTM = __webpack_require__(9);\n\nObject.defineProperty(exports, 'LSTM', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_LSTM).default;\n  }\n});\n\nvar _Liquid = __webpack_require__(10);\n\nObject.defineProperty(exports, 'Liquid', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Liquid).default;\n  }\n});\n\nvar _Hopfield = __webpack_require__(11);\n\nObject.defineProperty(exports, 'Hopfield', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Hopfield).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Network2 = __webpack_require__(1);\n\nvar _Network3 = _interopRequireDefault(_Network2);\n\nvar _Layer = __webpack_require__(0);\n\nvar _Layer2 = _interopRequireDefault(_Layer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Perceptron = function (_Network) {\n  _inherits(Perceptron, _Network);\n\n  function Perceptron() {\n    _classCallCheck(this, Perceptron);\n\n    var _this = _possibleConstructorReturn(this, (Perceptron.__proto__ || Object.getPrototypeOf(Perceptron)).call(this));\n\n    var args = Array.prototype.slice.call(arguments); // convert arguments to Array\n    if (args.length < 3) throw new Error('not enough layers (minimum 3) !!');\n\n    var inputs = args.shift(); // first argument\n    var outputs = args.pop(); // last argument\n    var layers = args; // all the arguments in the middle\n\n    var input = new _Layer2.default(inputs);\n    var hidden = [];\n    var output = new _Layer2.default(outputs);\n\n    var previous = input;\n\n    // generate hidden layers\n    for (var i = 0; i < layers.length; i++) {\n      var size = layers[i];\n      var layer = new _Layer2.default(size);\n      hidden.push(layer);\n      previous.project(layer);\n      previous = layer;\n    }\n    previous.project(output);\n\n    // set layers of the neural network\n    _this.set({\n      input: input,\n      hidden: hidden,\n      output: output\n    });\n    return _this;\n  }\n\n  return Perceptron;\n}(_Network3.default);\n\nexports.default = Perceptron;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Network2 = __webpack_require__(1);\n\nvar _Network3 = _interopRequireDefault(_Network2);\n\nvar _Layer = __webpack_require__(0);\n\nvar _Layer2 = _interopRequireDefault(_Layer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar LSTM = function (_Network) {\n  _inherits(LSTM, _Network);\n\n  function LSTM() {\n    _classCallCheck(this, LSTM);\n\n    var _this = _possibleConstructorReturn(this, (LSTM.__proto__ || Object.getPrototypeOf(LSTM)).call(this));\n\n    var args = Array.prototype.slice.call(arguments); // convert arguments to array\n    if (args.length < 3) throw new Error(\"not enough layers (minimum 3) !!\");\n\n    var last = args.pop();\n    var option = {\n      peepholes: _Layer2.default.connectionType.ALL_TO_ALL,\n      hiddenToHidden: false,\n      outputToHidden: false,\n      outputToGates: false,\n      inputToOutput: true\n    };\n    if (typeof last != 'number') {\n      var outputs = args.pop();\n      if (last.hasOwnProperty('peepholes')) option.peepholes = last.peepholes;\n      if (last.hasOwnProperty('hiddenToHidden')) option.hiddenToHidden = last.hiddenToHidden;\n      if (last.hasOwnProperty('outputToHidden')) option.outputToHidden = last.outputToHidden;\n      if (last.hasOwnProperty('outputToGates')) option.outputToGates = last.outputToGates;\n      if (last.hasOwnProperty('inputToOutput')) option.inputToOutput = last.inputToOutput;\n    } else {\n      var outputs = last;\n    }\n\n    var inputs = args.shift();\n    var layers = args;\n\n    var inputLayer = new _Layer2.default(inputs);\n    var hiddenLayers = [];\n    var outputLayer = new _Layer2.default(outputs);\n\n    var previous = null;\n\n    // generate layers\n    for (var i = 0; i < layers.length; i++) {\n      // generate memory blocks (memory cell and respective gates)\n      var size = layers[i];\n\n      var inputGate = new _Layer2.default(size).set({\n        bias: 1\n      });\n      var forgetGate = new _Layer2.default(size).set({\n        bias: 1\n      });\n      var memoryCell = new _Layer2.default(size);\n      var outputGate = new _Layer2.default(size).set({\n        bias: 1\n      });\n\n      hiddenLayers.push(inputGate);\n      hiddenLayers.push(forgetGate);\n      hiddenLayers.push(memoryCell);\n      hiddenLayers.push(outputGate);\n\n      // connections from input layer\n      var input = inputLayer.project(memoryCell);\n      inputLayer.project(inputGate);\n      inputLayer.project(forgetGate);\n      inputLayer.project(outputGate);\n\n      // connections from previous memory-block layer to this one\n      if (previous != null) {\n        var cell = previous.project(memoryCell);\n        previous.project(inputGate);\n        previous.project(forgetGate);\n        previous.project(outputGate);\n      }\n\n      // connections from memory cell\n      var output = memoryCell.project(outputLayer);\n\n      // self-connection\n      var self = memoryCell.project(memoryCell);\n\n      // hidden to hidden recurrent connection\n      if (option.hiddenToHidden) memoryCell.project(memoryCell, _Layer2.default.connectionType.ALL_TO_ELSE);\n\n      // out to hidden recurrent connection\n      if (option.outputToHidden) outputLayer.project(memoryCell);\n\n      // out to gates recurrent connection\n      if (option.outputToGates) {\n        outputLayer.project(inputGate);\n        outputLayer.project(outputGate);\n        outputLayer.project(forgetGate);\n      }\n\n      // peepholes\n      memoryCell.project(inputGate, option.peepholes);\n      memoryCell.project(forgetGate, option.peepholes);\n      memoryCell.project(outputGate, option.peepholes);\n\n      // gates\n      inputGate.gate(input, _Layer2.default.gateType.INPUT);\n      forgetGate.gate(self, _Layer2.default.gateType.ONE_TO_ONE);\n      outputGate.gate(output, _Layer2.default.gateType.OUTPUT);\n      if (previous != null) inputGate.gate(cell, _Layer2.default.gateType.INPUT);\n\n      previous = memoryCell;\n    }\n\n    // input to output direct connection\n    if (option.inputToOutput) inputLayer.project(outputLayer);\n\n    // set the layers of the neural network\n    _this.set({\n      input: inputLayer,\n      hidden: hiddenLayers,\n      output: outputLayer\n    });\n    return _this;\n  }\n\n  return LSTM;\n}(_Network3.default);\n\nexports.default = LSTM;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Network2 = __webpack_require__(1);\n\nvar _Network3 = _interopRequireDefault(_Network2);\n\nvar _Layer = __webpack_require__(0);\n\nvar _Layer2 = _interopRequireDefault(_Layer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Liquid = function (_Network) {\n  _inherits(Liquid, _Network);\n\n  function Liquid(inputs, hidden, outputs, connections, gates) {\n    _classCallCheck(this, Liquid);\n\n    // create layers\n    var _this = _possibleConstructorReturn(this, (Liquid.__proto__ || Object.getPrototypeOf(Liquid)).call(this));\n\n    var inputLayer = new _Layer2.default(inputs);\n    var hiddenLayer = new _Layer2.default(hidden);\n    var outputLayer = new _Layer2.default(outputs);\n\n    // make connections and gates randomly among the neurons\n    var neurons = hiddenLayer.neurons();\n    var connectionList = [];\n\n    for (var i = 0; i < connections; i++) {\n      // connect two random neurons\n      var from = Math.random() * neurons.length | 0;\n      var to = Math.random() * neurons.length | 0;\n      var connection = neurons[from].project(neurons[to]);\n      connectionList.push(connection);\n    }\n\n    for (var j = 0; j < gates; j++) {\n      // pick a random gater neuron\n      var gater = Math.random() * neurons.length | 0;\n      // pick a random connection to gate\n      var connection = Math.random() * connectionList.length | 0;\n      // let the gater gate the connection\n      neurons[gater].gate(connectionList[connection]);\n    }\n\n    // connect the layers\n    inputLayer.project(hiddenLayer);\n    hiddenLayer.project(outputLayer);\n\n    // set the layers of the network\n    _this.set({\n      input: inputLayer,\n      hidden: [hiddenLayer],\n      output: outputLayer\n    });\n    return _this;\n  }\n\n  return Liquid;\n}(_Network3.default);\n\nexports.default = Liquid;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Network2 = __webpack_require__(1);\n\nvar _Network3 = _interopRequireDefault(_Network2);\n\nvar _Trainer = __webpack_require__(3);\n\nvar _Trainer2 = _interopRequireDefault(_Trainer);\n\nvar _Layer = __webpack_require__(0);\n\nvar _Layer2 = _interopRequireDefault(_Layer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Hopfield = function (_Network) {\n  _inherits(Hopfield, _Network);\n\n  function Hopfield(size) {\n    _classCallCheck(this, Hopfield);\n\n    var _this = _possibleConstructorReturn(this, (Hopfield.__proto__ || Object.getPrototypeOf(Hopfield)).call(this));\n\n    var inputLayer = new _Layer2.default(size);\n    var outputLayer = new _Layer2.default(size);\n\n    inputLayer.project(outputLayer, _Layer2.default.connectionType.ALL_TO_ALL);\n\n    _this.set({\n      input: inputLayer,\n      hidden: [],\n      output: outputLayer\n    });\n\n    _this.trainer = new _Trainer2.default(_this);\n    return _this;\n  }\n\n  _createClass(Hopfield, [{\n    key: 'learn',\n    value: function learn(patterns) {\n      var set = [];\n      for (var p in patterns) {\n        set.push({\n          input: patterns[p],\n          output: patterns[p]\n        });\n      }return this.trainer.train(set, {\n        iterations: 500000,\n        error: .00005,\n        rate: 1\n      });\n    }\n  }, {\n    key: 'feed',\n    value: function feed(pattern) {\n      var output = this.activate(pattern);\n\n      var pattern = [];\n      for (var i in output) {\n        pattern[i] = output[i] > .5 ? 1 : 0;\n      }return pattern;\n    }\n  }]);\n\n  return Hopfield;\n}(_Network3.default);\n\nexports.default = Hopfield;\n\n/***/ })\n/******/ ]);\n});","/** 设置一条本地存储 */\r\nexport async function setLocalItem(name: string, value: string) {\r\n  //为了在非油猴环境下存储依旧能起一部分的作用\r\n  if (window.hasOwnProperty(\"GM\") && window.hasOwnProperty(\"GM\")) {\r\n    return await GM.setValue(name, value);\r\n  } else {\r\n    return await localStorage.setItem(name, String(value));\r\n  }\r\n}\r\n\r\n/** 读取一条本地存储 */\r\nexport async function getLocalItem<T>(/** 键名 */ name: string, /** 没有的时候的默认值 */ defaultValue?: T) {\r\n  //为了在非油猴环境下存储依旧能起一部分的作用\r\n  if (window.hasOwnProperty(\"GM\") && window.hasOwnProperty(\"GM\")) {\r\n    const res = await GM.getValue(name, defaultValue);\r\n    return res;\r\n  } else {\r\n    const value = localStorage.getItem(name);\r\n    if (value === null) return await defaultValue;\r\n    return await value;\r\n  }\r\n}\r\n/** 读取一条本地存储 */\r\nexport async function deleteLocalItem<T>(/** 键名 */ name: string) {\r\n  //为了在非油猴环境下存储依旧能起一部分的作用\r\n  if (window.hasOwnProperty(\"GM\") && window.hasOwnProperty(\"GM\")) {\r\n    const res = await GM.deleteValue(name);\r\n    return res;\r\n  } else {\r\n    const value = localStorage.removeItem(name);\r\n    return await value;\r\n  }\r\n}\r\n","import { Layer, Trainer, Network } from \"synaptic\";\r\nimport { getLocalItem, setLocalItem, deleteLocalItem } from \"../util/gm/store\";\r\n// ==UserScript==\r\n// @name         网页文本编辑,做笔记的好选择\r\n// @namespace    http://tampermonkey.net/\r\n// @version      1.38\r\n// @description  所见即所得！\r\n// @author       崮生 2234839456@qq.com\r\n// @match        *\r\n// @include      *\r\n// @connect      shenzilong.cn\r\n// @grant        GM.setValue\r\n// @grant        GM.getValue\r\n// @grant        GM.deleteValue\r\n// @grant        GM.xmlHttpRequest\r\n// ==/UserScript==\r\n(async function () {\r\n  class 感知机 extends Network {\r\n    constructor(input: number, hidden: number, output: number) {\r\n      const inputLayer = new Layer(input);\r\n      const hiddenLayer = new Layer(hidden);\r\n      const outputLayer = new Layer(output);\r\n      /** 连接层 */\r\n      inputLayer.project(hiddenLayer);\r\n      hiddenLayer.project(outputLayer);\r\n      super({ output: outputLayer, hidden: [hiddenLayer], input: inputLayer });\r\n    }\r\n  }\r\n  const s_key = \"rgzn_t1\";\r\n  //   deleteLocalItem(s_key);\r\n  const data = (await getLocalItem(s_key)) as string;\r\n  let p1: 感知机;\r\n  if (data) {\r\n    const json = JSON.parse(data);\r\n    console.log(json);\r\n    p1 = Network.fromJSON(json);\r\n  } else {\r\n    p1 = new 感知机(2, 5, 1);\r\n  }\r\n  console.log(\"深度学习网络数据\", data);\r\n  /** [导入与导出矩阵](https://github.com/cazala/synaptic/wiki/Networks) */\r\n  //   console.log(JSON.stringify(p1.toJSON()));\r\n\r\n  const 用户操作 = {\r\n    p: p1,\r\n    async train(input: number[], output: number[]) {\r\n      /** 训练器 */\r\n      const t = new Trainer(this.p);\r\n      console.log(await t.trainAsync([{ input, output }]));\r\n    },\r\n    /** 纠正 */\r\n    correct(input: number[], output: number[]) {\r\n      const learningRate = 0.3;\r\n      this.p.activate(input);\r\n      this.p.propagate(learningRate, output);\r\n    },\r\n    save() {\r\n      setLocalItem(s_key, JSON.stringify(this.p.toJSON()));\r\n    },\r\n  };\r\n  (unsafeWindow as any)[s_key] = 用户操作;\r\n\r\n  console.log(p1.activate([0, 0]));\r\n  console.log(p1.activate([1, 0]));\r\n  console.log(p1.activate([0, 1]));\r\n  console.log(p1.activate([1, 1]));\r\n  console.log(\"------------------\");\r\n})();\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}