parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"QVnC":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];!function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"==typeof module,h=t.regeneratorRuntime;if(h)u&&(module.exports=h);else{(h=t.regeneratorRuntime=u?module.exports:{}).wrap=w;var f="suspendedStart",s="suspendedYield",l="executing",p="completed",y={},v={};v[i]=function(){return this};var d=Object.getPrototypeOf,g=d&&d(d(P([])));g&&g!==e&&n.call(g,i)&&(v=g);var m=b.prototype=x.prototype=Object.create(v);E.prototype=m.constructor=b,b.constructor=E,b[c]=E.displayName="GeneratorFunction",h.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===E||"GeneratorFunction"===(r.displayName||r.name))},h.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(m),t},h.awrap=function(t){return{__await:t}},_(j.prototype),j.prototype[a]=function(){return this},h.AsyncIterator=j,h.async=function(t,r,e,n){var o=new j(w(t,r,e,n));return h.isGeneratorFunction(r)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(m),m[c]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},h.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},h.values=P,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(G),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),G(e),y}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;G(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}}}function w(t,r,e,n){var o=r&&r.prototype instanceof x?r:x,i=Object.create(o.prototype),a=new N(n||[]);return i._invoke=function(t,r,e){var n=f;return function(o,i){if(n===l)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return F()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=O(a,e);if(c){if(c===y)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===f)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=l;var u=L(t,r,e);if("normal"===u.type){if(n=e.done?p:s,u.arg===y)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=p,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function L(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(n){return{type:"throw",arg:n}}}function x(){}function E(){}function b(){}function _(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function j(t){var r;this._invoke=function(e,o){function i(){return new Promise(function(r,i){!function r(e,o,i,a){var c=L(t[e],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?Promise.resolve(h.__await).then(function(t){r("next",t,i,a)},function(t){r("throw",t,i,a)}):Promise.resolve(h).then(function(t){u.value=t,i(u)},function(t){return r("throw",t,i,a)})}a(c.arg)}(e,o,r,i)})}return r=r?r.then(i,i):i()}}function O(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=L(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function k(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function G(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:F}}function F(){return{value:r,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")());
},{}],"QYzI":[function(require,module,exports) {
var e=function(){return this||"object"==typeof self&&self}()||Function("return this")(),r=e.regeneratorRuntime&&Object.getOwnPropertyNames(e).indexOf("regeneratorRuntime")>=0,t=r&&e.regeneratorRuntime;if(e.regeneratorRuntime=void 0,module.exports=require("./runtime"),r)e.regeneratorRuntime=t;else try{delete e.regeneratorRuntime}catch(n){e.regeneratorRuntime=void 0}
},{"./runtime":"QVnC"}],"PMvg":[function(require,module,exports) {
module.exports=require("regenerator-runtime");
},{"regenerator-runtime":"QYzI"}],"BHXf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSelectors=u,exports.getIndex=c,exports.nodePath=a,exports.getJSon=i,exports.ajax_get=s,exports.default=void 0;var e=t(require("@babel/runtime/regenerator"));function t(e){return e&&e.__esModule?e:{default:e}}var n=function(e,t,n,r){return new(n||(n=Promise))(function(o,u){function c(e){try{i(r.next(e))}catch(t){u(t)}}function a(e){try{i(r.throw(e))}catch(t){u(t)}}function i(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(c,a)}i((r=r.apply(e,t||[])).next())})},r=document.createElement("input");r.id="__",r.setAttribute("style","\n        position: absolute;\n        top: -9999px;\n        left: -9999px;"),document.body.appendChild(r);var o={copyTitle:function(e){var t;t="string"==typeof e?e:e.getAttribute("title"),r.setAttribute("readonly","readonly"),r.setAttribute("value",t),r.select(),r.setSelectionRange(0,9999),document.execCommand("copy")}};function u(e){var t=a(e).reverse().map(function(e){return e.nodeName+":nth-child(".concat(c(e),")")}).join(">"),n="",r=e.id;r&&(n+="#".concat(r)),e.classList.forEach(function(e){n+=".".concat(e)});var o=c(e);return"".concat(t).concat(n,":nth-child(").concat(o,")")}function c(e){return"HTML"===e.nodeName?1:1+Array.from(e.parentElement.children).findIndex(function(t){return t===e})}function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(;null!=t[t.length-1].parentElement;)t.push(t[t.length-1].parentElement);return t.filter(function(e){return e instanceof HTMLElement})}function i(t,r){return n(this,void 0,void 0,e.default.mark(function n(){var o;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t,r);case 2:return o=e.sent,e.abrupt("return",JSON.parse(o));case 4:case"end":return e.stop()}},n)}))}function s(e,t){return t&&(e+="?"+d(t)),window.hasOwnProperty("GM")&&window.hasOwnProperty("GM")?new Promise(function(t,n){GM.xmlHttpRequest({method:"GET",url:e,onload:function(e){t(e.responseText)},onerror:n})}):new Promise(function(t,n){var r=new XMLHttpRequest;r.addEventListener("load",function(){t(r.responseText)}),r.addEventListener("error",n),r.open("get",e),r.send()})}function d(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}exports.default=o;
},{"@babel/runtime/regenerator":"PMvg"}],"C9JJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=location.href.includes("127.0.0.1"),t={state:0,elemtEdit:e,serverIp:e?"https://127.0.0.1/note/":"https://shenzilong.cn/note/",locationUrl:decodeURIComponent(location.origin+location.pathname)};exports.default=t;
},{}],"b9XL":[function(require,module,exports) {
function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(t)}function t(n){return"function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?module.exports=t=function(t){return o(t)}:module.exports=t=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":o(t)},t(n)}module.exports=t;
},{}],"E7HD":[function(require,module,exports) {
function e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}module.exports=e;
},{}],"0421":[function(require,module,exports) {
var e=require("../helpers/typeof"),r=require("./assertThisInitialized");function t(t,i){return!i||"object"!==e(i)&&"function"!=typeof i?r(t):i}module.exports=t;
},{"../helpers/typeof":"b9XL","./assertThisInitialized":"E7HD"}],"UJE0":[function(require,module,exports) {
function t(e){return module.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t(e)}module.exports=t;
},{}],"AkAO":[function(require,module,exports) {
function t(o,e){return module.exports=t=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},t(o,e)}module.exports=t;
},{}],"d4H2":[function(require,module,exports) {
var e=require("./setPrototypeOf");function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&e(r,t)}module.exports=r;
},{"./setPrototypeOf":"AkAO"}],"0fcM":[function(require,module,exports) {
function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}module.exports=n;
},{}],"P8NW":[function(require,module,exports) {
function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}module.exports=r;
},{}],"gygE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Style=void 0;var e=n(require("@babel/runtime/helpers/classCallCheck"));function n(e){return e&&e.__esModule?e:{default:e}}var o=function n(){(0,e.default)(this,n)};exports.Style=o,o.message="\n    border: 1px solid black;\n    background-color: white;\n    position: fixed;\n    top: 20px;\n    left: 30px;\n    animation: llej_myfirst 5s;\n    z-index:800;\n    ",o.warning="\n    border: 1px solid black;\n    background-color: red;\n    position: fixed;\n    top: 20px;\n    left: 30px;\n    z-index:800;\n    ",o.note="\n    border: 1px solid black;\n    background-color: #c6c5ba;\n    position: sticky;\n    top: 20px;\n    left: 30px;\n    width: auto;\n    height: auto;\n    z-index:800;\n    ";var t=document.createElement("style");t.innerHTML="\n@keyframes llej_myfirst\n{\n    from { background: red;color:white; }\n    to { background: yellow;color:black; }\n}\n",document.head.appendChild(t);
},{"@babel/runtime/helpers/classCallCheck":"0fcM"}],"Jb5D":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Message=void 0;var e=i(require("@babel/runtime/helpers/classCallCheck")),t=i(require("@babel/runtime/helpers/createClass")),s=require("./style");function i(e){return e&&e.__esModule?e:{default:e}}var n=function(){function i(t){(0,e.default)(this,i),this.el=document.createElement("msg-llej"),this.autoHideTime=3e3,this.setThis(t)}return(0,t.default)(i,[{key:"setThis",value:function(e){var t=e.style,i=void 0===t?s.Style.message:t,n=e.msg;this.el.innerHTML='\n        <div style="'.concat(i,'">').concat(n,"</div>\n        ")}},{key:"show",value:function(){return document.body.appendChild(this.el),this}},{key:"hide",value:function(){return this.el.remove(),this}},{key:"autoHide",value:function(){var e=this;return this.show(),setTimeout(function(){e.hide()},this.autoHideTime),this}}],[{key:"getMessage",value:function(e){return new i(e)}}]),i}();exports.Message=n;
},{"@babel/runtime/helpers/classCallCheck":"0fcM","@babel/runtime/helpers/createClass":"P8NW","./style":"gygE"}],"ZChF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.note=void 0;var e=n(require("@babel/runtime/helpers/classCallCheck")),t=n(require("@babel/runtime/helpers/createClass")),r=n(require("@babel/runtime/helpers/possibleConstructorReturn")),l=n(require("@babel/runtime/helpers/getPrototypeOf")),s=n(require("@babel/runtime/helpers/inherits")),u=require("./message"),i=require("./style");function n(e){return e&&e.__esModule?e:{default:e}}var a=function(u){function n(t){var s,u=t.el;return(0,e.default)(this,n),(s=(0,r.default)(this,(0,l.default)(n).call(this,{msg:"111111111111111111111",style:i.Style.note}))).selectEl=u,s}return(0,s.default)(n,u),(0,t.default)(n,[{key:"show",value:function(){return this.selectEl.appendChild(this.el),this}}]),n}(u.Message);exports.note=a;
},{"@babel/runtime/helpers/classCallCheck":"0fcM","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/possibleConstructorReturn":"0421","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","./message":"Jb5D","./style":"gygE"}],"qBpj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CommandControl=exports.addNote=exports.closeEditSelect=exports.editSelect=exports.deleteSelect=void 0;var t=a(require("@babel/runtime/helpers/possibleConstructorReturn")),e=a(require("@babel/runtime/helpers/getPrototypeOf")),n=a(require("@babel/runtime/helpers/inherits")),o=a(require("@babel/runtime/helpers/classCallCheck")),r=a(require("@babel/runtime/helpers/createClass")),u=require("./ui/message"),s=require("./ui/note"),i=require("./util");function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,o.default)(this,t),this.selectEL=e}return(0,r.default)(t,[{key:"do",value:function(){return this}},{key:"undo",value:function(){return this}},{key:"redo",value:function(){return this.do()}},{key:"toCommandJSON",value:function(){return{selectEL:(0,i.getSelectors)(this.selectEL),constructor:this.__proto__.constructor.name}}}],[{key:"load",value:function(t,e){return new e(document.querySelector(t.selectEL))}}]),t}(),c=function(u){function s(){return(0,o.default)(this,s),(0,t.default)(this,(0,e.default)(s).apply(this,arguments))}return(0,n.default)(s,u),(0,r.default)(s,[{key:"do",value:function(){return this.selectEL_display=this.selectEL.style.display,this.selectEL.style.display="none",this}},{key:"undo",value:function(){return this.selectEL.style.display=this.selectEL_display,this}}]),s}(l);exports.deleteSelect=c;var d=function(u){function s(){return(0,o.default)(this,s),(0,t.default)(this,(0,e.default)(s).apply(this,arguments))}return(0,n.default)(s,u),(0,r.default)(s,[{key:"do",value:function(){return this.selectEL_contentEditable=this.selectEL.contentEditable,this.selectEL.contentEditable="true",this}},{key:"undo",value:function(){return this.selectEL.contentEditable=this.selectEL_contentEditable,this}}]),s}(l);exports.editSelect=d;var h=function(u){function s(){return(0,o.default)(this,s),(0,t.default)(this,(0,e.default)(s).apply(this,arguments))}return(0,n.default)(s,u),(0,r.default)(s,[{key:"do",value:function(){return this.selectEL_contentEditable=this.selectEL.contentEditable,this.selectEL.contentEditable="false",this}},{key:"undo",value:function(){return this.selectEL.contentEditable=this.selectEL_contentEditable,this}}]),s}(l);exports.closeEditSelect=h;var f=function(u){function i(){return(0,o.default)(this,i),(0,t.default)(this,(0,e.default)(i).apply(this,arguments))}return(0,n.default)(i,u),(0,r.default)(i,[{key:"do",value:function(){return this.note=new s.note({el:this.selectEL}).show(),this}},{key:"undo",value:function(){return this.note.hide(),this}},{key:"redo",value:function(){return this.note.show(),this}}]),i}(l);exports.addNote=f;var m={commandStack:[],backoutStack:[],pushCommand:function(t){return this.commandStack.push(t)},run:function(t){try{return this.backoutStack.splice(0,this.backoutStack.length),this.pushCommand(t.do())}catch(e){console.error("命令执行失败",t,e)}return-1},backout:function(){if(0===this.commandStack.length)return console.warn("命令栈已空，无法进行撤销"),void u.Message.getMessage({msg:"命令栈已空，无法进行撤销"}).autoHide();var t=this.commandStack.pop();return this.backoutStack.push(t.undo())},reform:function(){if(0===this.backoutStack.length)return console.warn("撤销栈已空，无法进行重做"),void u.Message.getMessage({msg:"撤销栈已空，无法进行重做"}).autoHide();var t=this.backoutStack.pop();return this.commandStack.push(t.redo())},loadCommandJSON:function(t){return"deleteSelect"===t.constructor?l.load(t,c):"editSelect"===t.constructor?l.load(t,d):"closeEditSelect"===t.constructor?l.load(t,h):"addNote"===t.constructor?l.load(t,f):void 0},getCommandStackJsonObj:function(){return this.commandStack.map(function(t){return t.toCommandJSON()})},getCommandStackJSON:function(){return JSON.stringify(this.getCommandStackJsonObj())},loadCommandJsonAndRun:function(t){var e=this;return t.map(this.loadCommandJSON).forEach(function(t){return e.run(t)}),!0}};exports.CommandControl=m;
},{"@babel/runtime/helpers/possibleConstructorReturn":"0421","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/classCallCheck":"0fcM","@babel/runtime/helpers/createClass":"P8NW","./ui/message":"Jb5D","./ui/note":"ZChF","./util":"BHXf"}],"Qcow":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Warning=void 0;var e=l(require("@babel/runtime/helpers/classCallCheck")),r=l(require("@babel/runtime/helpers/possibleConstructorReturn")),t=l(require("@babel/runtime/helpers/getPrototypeOf")),s=l(require("@babel/runtime/helpers/inherits")),u=require("./message"),i=require("./style");function l(e){return e&&e.__esModule?e:{default:e}}var n=function(u){function l(s){var u=s.msg;return(0,e.default)(this,l),(0,r.default)(this,(0,t.default)(l).call(this,{msg:u,style:i.Style.warning}))}return(0,s.default)(l,u),l}(u.Message);exports.Warning=n;
},{"@babel/runtime/helpers/classCallCheck":"0fcM","@babel/runtime/helpers/possibleConstructorReturn":"0421","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/inherits":"d4H2","./message":"Jb5D","./style":"gygE"}],"7UyE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setLocalItem=n,exports.getLocalItem=u;var e=t(require("@babel/runtime/regenerator"));function t(e){return e&&e.__esModule?e:{default:e}}var r=function(e,t,r,n){return new(r||(r=Promise))(function(u,a){function o(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n.throw(e))}catch(t){a(t)}}function c(e){e.done?u(e.value):new r(function(t){t(e.value)}).then(o,s)}c((n=n.apply(e,t||[])).next())})};function n(t,n){return r(this,void 0,void 0,e.default.mark(function r(){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.hasOwnProperty("GM")||!window.hasOwnProperty("GM")){e.next=6;break}return e.next=3,GM.setValue(t,n);case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,localStorage.setItem(t,String(n));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},r)}))}function u(t,n){return r(this,void 0,void 0,e.default.mark(function r(){var u,a;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.hasOwnProperty("GM")||!window.hasOwnProperty("GM")){e.next=8;break}return e.next=3,GM.getValue(t,n);case 3:return u=e.sent,console.log(u),e.abrupt("return",u);case 8:if(null!==(a=localStorage.getItem(t))){e.next=13;break}return e.next=12,n;case 12:return e.abrupt("return",e.sent);case 13:return e.next=15,a;case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}},r)}))}
},{"@babel/runtime/regenerator":"PMvg"}],"D39N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.au_getJSON=a,exports._login=s,exports._regist=i,exports.remote_getStore=c,exports.remote_setStore=f,exports.remote_getAllStore=d;var e=n(require("@babel/runtime/regenerator")),t=require("./util"),r=n(require("./config"));function n(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,r,n){return new(r||(r=Promise))(function(u,o){function a(e){try{i(n.next(e))}catch(t){o(t)}}function s(e){try{i(n.throw(e))}catch(t){o(t)}}function i(e){e.done?u(e.value):new r(function(t){t(e.value)}).then(a,s)}i((n=n.apply(e,t||[])).next())})},o="";function a(r,n){return u(this,void 0,void 0,e.default.mark(function u(){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),n.key=o,e.abrupt("return",(0,t.getJSon)(r,n));case 3:case"end":return e.stop()}},u)}))}function s(n){return u(this,void 0,void 0,e.default.mark(function u(){var a;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,t.getJSon)(r.default.serverIp+"login",n);case 2:return(a=e.sent).body&&a.body.length>0&&(o=a.body),e.abrupt("return",a);case 5:case"end":return e.stop()}},u)}))}function i(n){return u(this,void 0,void 0,e.default.mark(function u(){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,t.getJSon)(r.default.serverIp+"register",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},u)}))}function c(t){return u(this,void 0,void 0,e.default.mark(function n(){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(r.default.serverIp+"getStore",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},n)}))}function f(t){return u(this,void 0,void 0,e.default.mark(function n(){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(r.default.serverIp+"setStore",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},n)}))}function d(){return u(this,void 0,void 0,e.default.mark(function t(){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(r.default.serverIp+"getAllStore");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},t)}))}
},{"@babel/runtime/regenerator":"PMvg","./util":"BHXf","./config":"C9JJ"}],"GvD6":[function(require,module,exports) {
"use strict";var e=c(require("@babel/runtime/regenerator")),t=i(require("./util")),r=c(require("./config")),n=require("./Command"),a=require("./ui/warning"),o=require("./ui/message"),u=require("./store"),s=require("./ajax");function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function u(e){try{i(n.next(e))}catch(t){o(t)}}function s(e){try{i(n.throw(e))}catch(t){o(t)}}function i(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(u,s)}i((n=n.apply(e,t||[])).next())})};!function(){d(this,void 0,void 0,e.default.mark(function i(){var c,l,m,f,p,b,g,v,y,w,k,C;return e.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return w=function(){var e=prompt(">>>网页笔记<<<\n请输入用户名");if(null!==e){var t=prompt(">>>网页笔记<<<\n请输入密钥。要记住哦，没有提供找回功能");null!==t&&(0,s._regist)({user:e,secret_key:t}).then(function(e){new o.Message({msg:e.message}).autoHide()})}},y=function(){var e=prompt(">>>网页笔记<<<\n请输入用户名");if(null!==e){var t=prompt(">>>网页笔记<<<\n请输入密钥。");null!==t&&(0,s._login)({user:e,secret_key:t}).then(function(e){new o.Message({msg:e.message}).autoHide()})}},v=function(t){return d(this,void 0,void 0,e.default.mark(function r(){var a,o,u;return e.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e.default.keys(t.element_List);case 1:if((r.t1=r.t0()).done){r.next=12;break}if(a=r.t1.value,!t.element_List.hasOwnProperty(a)){r.next=10;break}if(o=t.element_List[a],null!==(u=document.querySelector(a))){r.next=8;break}return r.abrupt("return",console.error("".concat(a," 的元素无法找到，赋值失败")));case 8:l.add(u),u.innerHTML=o;case 10:r.next=1;break;case 12:n.CommandControl.loadCommandJsonAndRun(t.CommandStack);case 13:case"end":return r.stop()}},r)}))},g=function(r){return d(this,void 0,void 0,e.default.mark(function a(){var o,s;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={element_List:{},CommandStack:n.CommandControl.getCommandStackJsonObj()},r.forEach(function(e){var r=(0,t.getSelectors)(e);o.element_List[r]=e.innerHTML}),s=JSON.stringify(o),e.next=5,(0,u.setLocalItem)(m,JSON.stringify(o));case 5:return e.abrupt("return",s);case 6:case"end":return e.stop()}},a)}))},b=function(e,t){return r.default.elemtEdit=!r.default.elemtEdit,console.log("切换编辑状态",r.default.elemtEdit),r.default.elemtEdit?document.addEventListener("mouseover",e):document.removeEventListener("mouseover",e),t.preventDefault(),t.returnValue=!1,!1},p=function(e){"2px solid red"!=e.style.outline&&(e.style.outline="2px solid red",setTimeout(function(){e!=c[0]?e.style.outline="":p(e)},400))},f=function(e){e.target instanceof HTMLElement&&(c=(0,t.nodePath)(e.target),p(e.target))},window.CommandControl=n.CommandControl,l=new Set,m="_storeName_llej_"+r.default.locationUrl,r.default.elemtEdit&&document.addEventListener("mouseover",f),document.addEventListener("keydown",function(u){return d(this,void 0,void 0,e.default.mark(function i(){var d;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("F2"!==(d=u.code)&&"KeyM"!==d){e.next=3;break}return e.abrupt("return",b(f,u));case 3:if(!1!==r.default.elemtEdit){e.next=5;break}return e.abrupt("return");case 5:if(!(document.querySelectorAll(":focus").length>0)){e.next=7;break}return e.abrupt("return");case 7:e.t0=d,e.next="KeyQ"===e.t0?10:"KeyD"===e.t0?14:"KeyC"===e.t0?16:"KeyW"===e.t0?19:"KeyZ"===e.t0?21:"KeyY"===e.t0?23:"KeyN"===e.t0?25:"KeyS"===e.t0?27:"KeyO"===e.t0?30:"KeyP"===e.t0?39:"Keyk"===e.t0?42:"KeyL"===e.t0?44:46;break;case 10:if(!(c[0].innerHTML.length>1e4)){e.next=12;break}return e.abrupt("return",new a.Warning({msg:"该元素内容过大，请选择更确定的文本元素。"}).autoHide());case 12:return n.CommandControl.run(new n.editSelect(c[0])),e.abrupt("break",47);case 14:return n.CommandControl.run(new n.deleteSelect(c[0])),e.abrupt("break",47);case 16:if(t.default.copyTitle(c[0]),!1!==u.ctrlKey){e.next=19;break}return e.abrupt("break",47);case 19:return n.CommandControl.run(new n.closeEditSelect(c[0])),e.abrupt("break",47);case 21:return n.CommandControl.backout(),e.abrupt("break",47);case 23:return n.CommandControl.reform(),e.abrupt("break",47);case 25:return n.CommandControl.run(new n.addNote(c[0])),e.abrupt("break",47);case 27:return g(l),new o.Message({msg:"保存成功"}).autoHide(),e.abrupt("break",47);case 30:return e.t1=s.remote_setStore,e.t2=r.default.locationUrl,e.next=34,g(l);case 34:return e.t3=e.sent,e.t4={url:e.t2,store:e.t3},e.t5=function(e){new o.Message({msg:"云端存储:"+e.message}).autoHide()},(0,e.t1)(e.t4).then(e.t5),e.abrupt("break",47);case 39:return new o.Message({msg:"正在读取云端存储"}).autoHide(),(0,s.remote_getStore)({url:r.default.locationUrl}).then(function(e){if(void 0===e.body||0===e.body.length)return new o.Message({msg:"云端存储:"+e.message}).autoHide();var t=JSON.parse(e.body[0].store);v(t),new o.Message({msg:"云端存储:"+e.message}).autoHide()}),e.abrupt("break",47);case 42:return w(),e.abrupt("break",47);case 44:return y(),e.abrupt("break",47);case 46:return e.abrupt("return",!0);case 47:case"end":return e.stop()}},i)}))}),document.addEventListener("focusout",function(){console.log("元素失去焦点",event.target)}),document.addEventListener("input",function(e){if(e.target instanceof HTMLElement){var t=e.target;t.innerHTML.length>1e4?new a.Warning({msg:"该元素文本过大，将不会保存这里的修改，请选择更确定的文本元素。"}).autoHide():l.add(t)}}),setInterval(function(){g(l),new o.Message({msg:"自动保存成功..."}).autoHide()},6e4),i.next=18,(0,u.getLocalItem)(m,void 0);case 18:if(void 0!==(k=i.sent)){i.next=21;break}return i.abrupt("return",console.warn("没有可用的存储库"));case 21:C=JSON.parse(k),"complete"===document.readyState?v(C):window.addEventListener("load",function(){v(C)});case 23:case"end":return i.stop()}},i)}))}();
},{"@babel/runtime/regenerator":"PMvg","./util":"BHXf","./config":"C9JJ","./Command":"qBpj","./ui/warning":"Qcow","./ui/message":"Jb5D","./store":"7UyE","./ajax":"D39N"}]},{},["GvD6"], null)
//# sourceMappingURL=/网页笔记.js.map